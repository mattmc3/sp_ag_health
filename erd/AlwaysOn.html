<?xml version='1.0' encoding='UTF-8' standalone='yes'?>
<!DOCTYPE html>
<html lang='en-us' xmlns='http://www.w3.org/1999/xhtml' >
<head>
<title>AlwaysOn</title>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" crossorigin="anonymous" />
<link rel="shortcut icon" href="https://www.dbschema.com/images/favicon.ico">
<style type='text/css'>
body {
    font-family: 'Segoe UI', 'Lucida sans', Dialog;
    font-size: 13px;
    background-color:#f5f5f5;
    margin: 10px;
}
</style>
</head>

<body>
<div class='svg-container'>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'   width='1728' height='1758' viewBox='0 0 1728 1758' >
  <script type='text/ecmascript'>
  <![CDATA[
  function hghl(el) { for ( var i in el ){ var elem = document.getElementById(el[i]); if ( elem != null ) elem.setAttribute('class','highlight');  }  }
  function uhghl(el) { for ( var i in el ){ var elem = document.getElementById(el[i]); if ( elem != null ) elem.setAttribute('class','scene'); }  } 
  ]]>
  </script> 

<style type='text/css'>
  text                { fill:#000000; font-family: System, 'Trebuchet MS', Dialog; font-size:12px; }
  a text:hover        { fill:#94025f; text-shadow: 0px 0px 6px #d0ce00; font-size:13px; }
  text.highlight      { fill:#94025f; text-shadow: 0px 0px 4px #eac533; font-size:13px; }
  text.colType        { fill:#b3b3b3; }
  text.relName        { fill:#b09c7c; }
  path                { stroke:#5c554f; stroke-width:1.15; fill:none; }
  path                { stroke:#5c554f; stroke-width:1.15; fill:none;}
  path.virtual        { stroke:#b7642d; }
  path.logo           { fill:#fbeac0;fill-opacity:1;stroke-width:0.3;stroke:#222222; }
  path.dotted         { stroke-dasharray:4,2; }
  path.scene          { stroke-width:10; opacity:0;}
  path.highlight      { stroke-width:5; stroke:#c1a662; opacity:0.6;}
  rect.entity         { fill:#ffffff; stroke:#aaa; stroke-width:1;shape-rendering:crispEdges; }
  line.delim          { stroke-width:1; shape-rendering:crispEdges; }
  text.callout        { fill:#000000; font-family: System, 'Trebuchet MS', Dialog; font-size:12px; }
  rect.callout        { fill:url(#calloutGradient); stroke:#bebdbd; stroke-width:0.5; }
  rect.grp            { stroke:#b1b1b1; stroke-width:1.7; opacity:0.8; }
  path.st0            { fill:#ececec;fill-opacity:1;stroke-width:0.6;stroke:#d0d0d0; }
</style>
<defs>
  <pattern id='layoutBgA' patternUnits='userSpaceOnUse'  width='10' height='20' x='0' y='0' viewBox='0 0 5 10'>  
     <line x1='-2' y1='1' x2='7' y2='10' stroke='#f3f3f3' stroke-width='.5'/>  
     <line x1='-2' y1='6' x2='7' y2='15' stroke='#f3f3f3' stroke-width='.5'/>  
     <line x1='-2' y1='-4' x2='7' y2='5' stroke='#f3f3f3' stroke-width='.5'/>  
  </pattern>  
  <radialGradient id='layoutBgB' gradientUnits='userSpaceOnUse' cx='50%' cy='50%' r='75%' fx='46%' fy='22%'>
     <stop offset='0%' stop-opacity='.2' stop-color='#f5f5f5' />  
     <stop offset='100%' stop-color='#efefef' />  
  </radialGradient>
  <pattern id='layoutBgTr' patternUnits='userSpaceOnUse'  width='300' height='300' x='0' y='0' viewBox='0 0 300 300'>  
  <path class='st0' d='m 62.011835,91.267143 c 3.536475,3.175214 2.262669,8.705999 -1.637711,11.015197 -3.594697,5.8423 -6.34682,-2.892623 -9.715478,-4.653898 -5.609222,-2.838926 2.050802,-6.680123 4.77004,-8.319046 2.334696,-0.724067 4.935143,0.312302 6.583149,1.957747 z m -2.720492,2.538595 c -2.698397,-3.517732 -9.282815,1.269287 -3.69635,3.568637 2.765331,5.605665 7.052809,-0.56184 3.69635,-3.568637 z' />
  <path class='st0' d='m 72.25864,84.624638 c 4.108046,3.143003 -0.737059,6.895259 -1.994918,8.323564 -3.586718,5.561143 -6.495079,-4.197379 -10.07759,-5.582178 -4.443422,-1.088878 1.349298,-7.249213 2.503526,-2.503449 2.464639,4.517161 2.304019,-3.70697 6.291113,-1.995914 1.280083,0.137865 2.410691,0.864819 3.277869,1.757977 z m -2.646109,2.323242 c -4.797162,-3.078383 -2.810517,6.305507 0.515161,1.990646 0.296432,-0.688582 0.01209,-1.493412 -0.515161,-1.990646 z' />
  <path class='st0' d='m 78.230641,79.436735 c 4.142121,3.027466 -2.020102,10.435276 -3.450543,5.477315 3.306312,-5.248112 -9.186019,-2.220094 -5.805994,-8.77679 -0.544141,-3.93011 6.797826,-2.102227 3.386015,0.245477 -0.181085,2.915838 4.637371,1.019311 5.870522,3.053982 z' />
  <path class='st0' d='m 82.744502,72.597397 c -4.901605,1.926521 1.146497,6.285555 2.559694,2.225783 6.21817,3.539297 -6.640186,8.416664 -7.590325,1.997457 -2.24365,-2.914883 4.026676,-10.148618 5.030631,-4.22324 z' />
  <path class='st0' d='m 90.727458,64.259158 c 1.583987,1.690029 3.321317,3.2696 4.81267,5.026353 -2.535706,6.849794 -6.445583,-5.918773 -8.388458,-0.167017 0.782768,2.03426 5.877405,3.752079 2.670979,5.711199 -3.315119,1.519161 -5.782422,-5.157931 -8.858893,-6.780537 -4.229842,-1.139816 1.510134,-7.074128 2.586227,-2.385939 3.141198,5.495193 1.840537,-5.598295 7.177489,-1.404062 z' />
  <path class='st0' d='m 99.622027,58.374253 c 1.493293,1.9548 -6.281936,7.024659 -0.885258,4.740447 0.386238,-4.434477 6.131941,-1.133173 2.175851,1.618005 -4.421491,6.12739 -13.666659,-3.151506 -7.058299,-7.136537 1.785129,-1.119329 4.348209,-0.743179 5.767706,0.778085 z m -2.900824,1.89746 c -3.608188,-2.208543 -2.280489,5.00803 -0.12563,0.329531 z' />
  <path class='st0' d='m 115.18023,50.570441 c -1.61703,5.201678 -4.6204,-0.364502 -7.01598,-1.749619 -4.40977,2.122562 4.89641,4.913939 1.89606,7.018157 -2.48061,3.877635 -4.11404,-4.060614 -7.01192,-2.6391 -1.76318,3.107252 7.28394,6.252304 0.87346,7.876177 -1.74515,-2.956649 -9.055498,-5.610518 -3.950378,-8.66062 1.696478,1.897023 1.770418,-5.43503 5.347308,-3.072411 -0.44014,-5.474701 6.11995,-4.950882 7.7846,-0.815355 0.69076,0.682329 1.39587,1.351469 2.07685,2.042771 z' />
  <path class='st0' d='m 120.54891,39.417125 c 2.50681,1.334124 4.80466,4.941837 0.75044,5.297362 -0.46414,1.89865 -5.25369,5.602652 -8.01742,1.815475 -3.87345,-2.809139 -0.0676,-7.603869 2.3036,-8.133924 1.6795,-3.853018 3.16703,-1.199465 4.96338,1.021087 z m -2.2464,2.175828 c -4.8049,-2.992167 -3.08987,6.380358 0.42374,2.036159 0.33052,-0.677508 0.12099,-1.525836 -0.42374,-2.036159 z' />
  <path class='st0' d='m 128.50836,24.06821 c -5.10403,3.035506 3.20535,6.383175 5.05938,9.450276 -0.91853,2.95886 -4.06493,3.650723 -5.34691,0.265618 -2.25715,-2.089033 -4.65672,-6.948595 -7.07024,-2.584686 -4.71758,-3.764394 3.81217,-5.812054 5.12382,-9.226328 0.75738,0.677487 1.38637,1.498638 2.23389,2.095175 z' />
  <path class='st0' d='m 137.14366,22.299812 c -3.09615,2.259885 0.71537,4.412454 1.99042,6.435866 -3.08975,5.080354 -5.91384,-2.98648 -8.92144,-4.094939 1.44369,-3.219573 3.3497,-1.335928 4.27156,-4.41058 0.97822,-0.894325 1.75044,1.871047 2.65946,2.069653 z' />
  <path class='st0' d='m 136.85093,14.890174 c 2.31562,5.283511 -7.17975,1.771993 -1.29675,-0.475107 l 0.7108,0.08973 z m 4.867,5.317354 c 2.56912,1.439678 4.26517,4.725219 0.30678,5.233637 -1.56592,-3.098864 -9.51683,-5.749448 -3.64502,-8.633714 1.17746,0.325095 2.15375,2.591149 3.33824,3.400077 z' />
  <path class='st0' d='m 149.95578,11.976423 c 2.50679,1.334142 4.80455,4.94192 0.75041,5.297394 -0.4641,1.898604 -5.25368,5.602645 -8.0174,1.81545 -3.87347,-2.80918 -0.0676,-7.603844 2.30366,-8.133968 1.67949,-3.8530525 3.16695,-1.1993573 4.96333,1.021124 z m -2.24641,2.175828 c -4.80489,-2.992177 -3.08986,6.380343 0.42374,2.036167 0.33055,-0.677518 0.121,-1.52585 -0.42374,-2.036167 z' />
  <path class='st0' d='m 153.26135,7.538431 c 2.60497,1.5799548 6.03999,5.944272 1.08117,6.050232 -2.53319,-3.231828 -7.20316,-6.4304525 -8.84748,-9.4582682 1.89121,-2.8664883 3.78452,-2.247699 5.38514,0.8929426 0.78017,0.8503859 1.57195,1.6911437 2.38118,2.5150667 z' />
  </pattern>  
  <linearGradient id='groupUnderTitleLine' x1='0%' y1='0%' x2='100%' y2='0%' >
          <stop offset='0%' stop-color='#999999' stop-opacity='0.7'/> 
          <stop offset='100%' stop-color='#999999' stop-opacity='0' /> 
   </linearGradient>
  <radialGradient id='calloutGradient' cx='25%' cy='20%' r='80%' fx='10%' fy='10%'>
	   <stop offset='0%' stop-color='#ffffff' />
    <stop offset='100%' stop-color='#f8f6d1' />
  </radialGradient>
  <filter id='shadow' width='120%' height='120%'> 
      <feOffset result='offOut' in='SourceGraphic' dx='1' dy='1' /> 
      <feColorMatrix result='matrixOut' in='offOut' type='matrix' 
      values='0.1 0 0 0 0 0 0.4 0 0 0 0 0 0.6 0 0 0 0 0 0.3 0' /> 
      <feGaussianBlur result='blurOut' in='matrixOut' stdDeviation='3' /> 
      <feBlend in='SourceGraphic' in2='blurOut' mode='normal' /> 
    </filter> 
  <filter id='fkShadow' height='130%'> 
    <feGaussianBlur in='SourceAlpha' stdDeviation='1.5'/> <!-- stdDeviation is how much to blur -->
    <feOffset dx='1.2' dy='1.2' result='offsetblur'/> <!-- how much to offset -->
    <feMerge>
    <feMergeNode/> <!-- this contains the offset blurred image -->
    <feMergeNode in='SourceGraphic'/> <!-- this contains the element that the filter is applied to -->
    </feMerge>
  </filter>
  <radialGradient id='legendGradient' fx='5%' fy='5%' r='75%' spreadMethod='pad'>
          <stop offset='0%' stop-color='#eefbf2' stop-opacity='1'/> 
          <stop offset='100%' stop-color='#cff9cb' stop-opacity='1' /> 
   </radialGradient>
  <symbol id='calloutArrowDown' overflow='visible' >
      <path d='M 0,0 L 8,12 L 16,0 z' style='fill:#f8f6d1;stroke:none; filter: url(#shadow);' />
      <path d='M 0,0 L 8,12 L 16,0' style='stroke:#bebdbd; stroke-width:0.5;' />
  </symbol>
  <symbol id='calloutArrowUp' overflow='visible' >
      <path d='M 0,16 L 8,4 L 16,16 z' style='fill:#ffffff; stroke:none; filter: url(#shadow);' />
      <path d='M 0,16 L 8,4 L 16,16' style='stroke:#bebdbd; stroke-width:0.5;' />
  </symbol>
  <symbol id='pk' overflow='visible' >
    <g transform='scale(0.99)'>
     <path style='fill:#fffa7d;stroke:#765f03;stroke-width:0.6;stroke-linecap:round;stroke-linejoin:round;'
        d='M 9.3678877,3.5695485 C 9.1030218,3.2729386 9.0796382,2.7628519 9.3396185,2.4517097 9.5449651,2.1956495 9.9040386,2.0980533 10.199638,2.2169415 10.533525,2.3415459 10.775153,2.706942 10.750675,3.0842709 10.737029,3.3980003 10.541153,3.699122 10.258248,3.8066067 9.966649,3.9250429 9.6169668,3.8418805 9.4008073,3.6062324 9.3894892,3.5943518 9.3785264,3.582104 9.3678886,3.5695487 z M 11.226617,6.9916004 C 11.888137,6.3548946 12.293488,5.4172188 12.311087,4.442353 12.378144,2.7379364 11.248678,1.0541269 9.7322318,0.44767357 8.3887112,-0.1280313 6.7865012,0.26822889 5.8918395,1.4007929 5.080823,2.3839145 4.9336815,3.8452096 5.3635544,5.101615 L 4.3670905,5.315913 C 4.0664984,5.3682645 4.0967703,5.6316724 4.2574957,5.8208829 L 4.9124,6.5655244 4.1543436,7.2512357 3.2136002,7.2163506 3.1674775,8.5586827 2.0406832,8.5086512 1.5965306,8.9299953 1.5471661,10.179833 0.75616674,10.195223 0.2112857,10.758575 0.15354288,11.735988 0.07199052,12.765553 c 0.36440953,0.238225 0.79006967,0.195492 1.44938278,-0.02675 L 6.3033562,8.1282037 6.8217102,8.6765688 C 6.9985465,8.8799427 7.3003699,8.7497574 7.358381,8.5016252 L 7.4938877,7.5084164 c 0.8537488,0.3985387 1.8303125,0.4711541 2.6851793,0.1427713 0.393927,-0.1407258 0.746858,-0.3701772 1.04755,-0.6595873 z'/>
     <path d='M 6.8014948,6.3102123 0.15369063,13.024481 0.21560535,12.141962 6.0062342,6.2683782 z'
        style='fill:#ffe5a5;fill-opacity:1;stroke:#854e31;stroke-width:0.06912433;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:3.00300009'/>
    </g>
  </symbol>
  <symbol id='dist' overflow='visible' >
    <g transform='scale(0.99)'>
      <path style='fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;' d='M 0.177,11.431 12.28,11.449'/>
      <path style='fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;' d='m 6.124,3.954 0.066,7.154 v 0'/>
      <rect width='11.78' height='3.40' x='0.40' y='0.44' style='fill:#fffa7d;stroke:#765f03;stroke-width:0.6;' ry='0.83'/>
      <rect width='11.78' height='3.40' x='0.40' y='5.609' style='fill:#fffa7d;stroke:#765f03;stroke-width:0.6;' ry='0.832'/>
    </g>
  </symbol>
  <symbol id='unq' overflow='visible' >
    <g transform='scale(0.99)'>
      <rect style='fill:#fbea8e;stroke:#7e4d31;stroke-width:0.71934468;stroke-linecap:round;stroke-linejoin:round;'
         width='2.29' height='8.43' x='7.48' y='-0.76' ry='1.14' transform='matrix(0.701,0.713,-0.727,0.685,0,0)' />
      <path style='fill:white;stroke:#858585;stroke-width:1.2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;'
         d='m 26.04,8.64 a 4.13,4.13 0 1 1 -8.26,0 4.13,4.13 0 1 1 8.26,0 z'
         transform='matrix(1.025,0,0,0.987,-14.690,-3.862)' />
      <text x='5.8' y='7.4' style='font-size:7px;fill:#8a8a8a;'>1</text>
    </g>
  </symbol>
  <symbol id='idx' overflow='visible' >
    <g transform='scale(0.99)'>
      <rect style='fill:#fbea8e;stroke:#7e4d31;stroke-width:0.71934468;stroke-linecap:round;stroke-linejoin:round;'
         width='2.29' height='8.43' x='7.48' y='-0.76' ry='1.14' transform='matrix(0.701,0.713,-0.727,0.685,0,0)' />
      <path style='fill:white;stroke:#858585;stroke-width:1.2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;'
         d='m 26.04,8.64 a 4.13,4.13 0 1 1 -8.26,0 4.13,4.13 0 1 1 8.26,0 z'
         transform='matrix(1.025,0,0,0.987,-14.690,-3.862)' />
    </g>
  </symbol>
  <symbol id='fk' overflow='visible' >
    <g transform='scale(0.87)'>
      <path style='fill:#f3e1b7;stroke:#7e471f;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;'
      d='M 12.48,0.33 7.07,0.89 9.067,2.974 0.329,11.731 1.073,12.597 9.811,3.841 11.77,5.78 z' />
    </g>
  </symbol>
  <symbol id='ref' overflow='visible' >
    <g transform='scale(0.87)'>
      <path style='fill:#f3e1b7;stroke:#7e471f;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;'
          d='M 0.10,12.70 5.31,12.15 3.40,10.06 11.82,1.32 11.11,0.45 2.68,9.19 0.80,7.24 z'/>
    </g>
  </symbol>
  <symbol id='flag0' overflow='visible' >
    <g transform='scale(0.92)'>
      <path style='fill:#b7d0f6;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;'
          d='M 0.12,12.67 0.16,7.22 C 2.59,7.22 4.13,8.78 9.22,4.22 5.68,4.98 2.53,4.50 0.09,1.80 z'/>
    </g>
  </symbol>
  <symbol id='flag1' overflow='visible' >
    <g transform='scale(0.92)'>
      <path style='fill:#f4a393;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;'
          d='M 0.12,12.67 0.16,7.22 C 2.59,7.22 4.13,8.78 9.22,4.22 5.68,4.98 2.53,4.50 0.09,1.80 z'/>
    </g>
  </symbol>
  <symbol id='flag2' overflow='visible' >
    <g transform='scale(0.92)'>
      <path style='fill:#77ec8b;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;'
          d='M 0.12,12.67 0.16,7.22 C 2.59,7.22 4.13,8.78 9.22,4.22 5.68,4.98 2.53,4.50 0.09,1.80 z'/>
    </g>
  </symbol>
  <symbol id='nn' overflow='visible' >
  <path style='stroke:#9b3e50;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;'
          d='M 0,0 3,3 M 0,3 3,0 z'/>
  </symbol>
  <symbol id='view' overflow='visible' >
    <g transform='scale(0.99)'>
     <line x1='12' y1='6' x2='19' y2='0' stroke='black' stroke-width='0.5' />
     <line x1='0' y1='6' x2='7' y2='0' stroke='black' stroke-width='0.5' />
     <circle cx='3' cy='6' r='3' fill='#f9ebbc' stroke='black' stroke-width='0.5'/>
     <circle cx='10' cy='6' r='3' fill='#f9ebbc' stroke='black' stroke-width='0.5'/>
    </g>
  </symbol>
  <marker id='arrow01' viewBox='0 0 16.00 8.00' refX='8.00' refY='4.00' markerUnits='strokeWidth' markerWidth='16.00' markerHeight='8.00' orient='auto'>
    <path d='M 0.00,4.00 L 16.00,4.00 z' />
  </marker>
  <marker id='arrow1' viewBox='0 0 16.00 8.00' refX='8.00' refY='4.00' markerUnits='strokeWidth' markerWidth='16.00' markerHeight='8.00' orient='auto'>
    <path d='M 0.00,4.00 L 16.00,4.00 z' />
  </marker>
  <marker id='foot01' viewBox='0 0 16.00 8.00' refX='8.00' refY='4.00' markerUnits='strokeWidth' markerWidth='16.00' markerHeight='8.00' orient='auto'>
    <path d='M 1.60,4.00 L 3.20,4.00 L 4.80,4.00 L 6.40,4.00 z' />
  </marker>
  <marker id='foot0p' viewBox='0 0 16.00 8.00' refX='8.00' refY='4.00' markerUnits='strokeWidth' markerWidth='16.00' markerHeight='8.00' orient='auto'>
    <path d='M 1.60,4.00 L 3.20,4.00 L 4.80,4.00 L 6.40,4.00 z' />
    <path d='M 0.00,0.00 L 8.00,4.00 L 0.00,8.00' />
  </marker>
  <marker id='foot1' viewBox='0 0 16.00 8.00' refX='8.00' refY='4.00' markerUnits='strokeWidth' markerWidth='16.00' markerHeight='8.00' orient='auto'>
    <path d='M 0.00,4.00 L 16.00,4.00 z' />
  </marker>
  <marker id='foot1p' viewBox='0 0 16.00 8.00' refX='8.00' refY='4.00' markerUnits='strokeWidth' markerWidth='16.00' markerHeight='8.00' orient='auto'>
    <path d='M 0.00,4.00 L 16.00,4.00 z' />
    <path d='M 0.00,0.00 L 8.00,4.00 L 0.00,8.00' />
  </marker>
  <linearGradient id='tbg_669999' x1='0%' y1='0%' x2='0%' y2='100%' >
     <stop offset='0%' stop-color='#E0F8F8' /> 
     <stop offset='60%' stop-color='#C1EEEE' /> 
     <stop offset='100%' stop-color='#E0F8F8' /> 
  </linearGradient>
  <linearGradient id='tbg_B3801A' x1='0%' y1='0%' x2='0%' y2='100%' >
     <stop offset='0%' stop-color='#F8F0E0' /> 
     <stop offset='60%' stop-color='#EEDFC1' /> 
     <stop offset='100%' stop-color='#F8F0E0' /> 
  </linearGradient>
  <linearGradient id='tbg_3986C1' x1='0%' y1='0%' x2='0%' y2='100%' >
     <stop offset='0%' stop-color='#E0EDF8' /> 
     <stop offset='60%' stop-color='#C1DAEE' /> 
     <stop offset='100%' stop-color='#E0EDF8' /> 
  </linearGradient>
</defs>

<!-- == Desktop == -->
<rect x='1' y='1' width='1726' height='1756' rx='8' ry='8' style='fill:url(#layoutBgB); stroke:#777777; stroke-width:0.5;' />
<rect x='1' y='1' width='1726' height='1756' rx='8' ry='8' style='fill:url(#layoutBgA); stroke:#777777; stroke-width:0.5;' />

<!-- == Legend == -->
<g transform='translate(10,10)'>
  <rect x='10' y='10' width='330' height='56' rx='6' ry='6' style='fill:url(#legendGradient);filter:url(#shadow);'/> 
  <text x='20' y='43'>AlwaysOn</text> 
  <text x='20' y='57' style='fill:#aaaaaa; font-size:11px;'><tspan>Move the mouse over tables &amp; columns to read the comments.</tspan></text> 
<a xlink:href='https://www.dbschema.com'> <path class='logo' d='m 32.309685,20.963194 c 0.411708,4.732616 -4.298055,7.925636 -8.723583,6.970196 -6.616967,1.8448 -2.656457,-6.434594 -3.911969,-10.01566 -2.15469,-5.89407 6.06247,-3.508505 9.167655,-2.863689 2.199228,1.054873 3.389343,3.582089 3.467897,5.909153 z m -3.720955,0.01451 c 0.434195,-4.414565 -7.644142,-5.37533 -5.137307,0.107342 -1.812268,5.992146 5.532698,4.379388 5.137307,-0.107342 z' /> <path class='logo' d='m 44.329732,23.050637 c 0.850982,5.097305 -5.250434,4.558924 -7.144836,4.752415 -6.418993,1.64391 -1.872992,-7.49274 -3.541914,-10.942842 -2.499646,-3.817859 5.939283,-4.402698 3.538545,-0.13612 -1.287874,4.989123 4.215411,-1.154796 5.956717,2.809584 0.840273,0.970849 1.168829,2.272413 1.191488,3.516963 z m -3.519477,-0.09299 c -1.398216,-5.518069 -6.361061,2.717467 -0.984368,1.810718 0.686994,-0.30388 1.029454,-1.087638 0.984368,-1.810718 z' /> <path class='logo' d='m 52.234961,23.301163 c 0.954818,5.035675 -8.606408,6.284861 -6.262292,1.674914 6.000358,-1.604717 -5.188764,-7.870044 1.75972,-10.384908 2.288682,-3.253567 6.399287,3.075831 2.304111,2.48058 -2.124941,2.016587 2.688777,3.89858 2.198472,6.229403 z' /> <path class='logo' d='m 60.204336,21.349224 c -4.894917,-1.916474 -3.458707,5.391212 0.347494,3.37231 2.120589,6.821713 -10.599623,1.664746 -6.906229,-3.691132 0.354172,-3.663246 9.875349,-4.711252 6.558735,0.318822 z' /> <path class='logo' d='m 71.730617,20.654299 c 0.0013,2.316285 0.190131,4.655698 0.07825,6.958009 -6.532419,3.303565 -0.660423,-8.722256 -6.009639,-5.821653 -0.818815,2.024533 1.726403,6.746337 -1.95327,6.005484 -3.458346,-1.137537 -0.696275,-7.713407 -1.833252,-10.994208 -2.308916,-3.710131 5.93704,-4.164951 3.518609,0.0063 -1.462376,6.166445 5.169629,-2.857523 6.19931,3.846079 z' /> <path class='logo' d='m 82.245738,22.378957 c -0.24581,2.448954 -9.386766,0.8867 -3.885979,2.877055 3.312576,-2.99157 5.250902,3.334514 0.482647,2.665545 -7.415384,1.492275 -7.823196,-11.597641 -0.275476,-10.032117 2.068161,0.391458 3.682204,2.408824 3.678808,4.489517 z m -3.414436,-0.578473 c -1.124703,-4.072004 -5.087405,2.125488 -0.316922,0.156453 z' /> <path class='logo' d='m 98.936899,27.222794 c -4.73541,2.718339 -3.1239,-3.406557 -3.92611,-6.050494 -4.66985,-1.438471 0.21621,6.932413 -3.41219,6.438039 -4.46096,1.160054 -0.22824,-5.774711 -3.31526,-6.700429 -3.410722,1.082173 1.04451,9.536575 -4.745091,6.372895 0.746632,-3.355214 -2.776394,-10.269232 3.034971,-9.038963 -0.058,2.544602 5.00686,-2.785359 6.00342,1.37844 3.42021,-4.316316 7.851251,0.524966 6.24018,4.690538 0.0379,0.969988 0.0954,1.940046 0.12008,2.909974 z' /> <path class='logo' d='m 110.47859,22.686058 c 0.91826,2.682088 0.13016,6.890551 -3.0725,4.397004 -1.63641,1.077877 -7.664291,0.541832 -7.09365,-4.114836 -0.907891,-4.692933 5.14729,-5.625578 7.24058,-4.40354 3.85932,-1.686263 3.13176,1.271515 2.92557,4.121372 z m -3.12695,0.0704 c -1.46278,-5.460062 -6.61615,2.5826 -1.08221,1.782003 0.70431,-0.272594 1.13111,-1.037444 1.08221,-1.782003 z' /> </a>
</g>

<g transform='translate(0,110)'>
<!-- == Group 'Availability Groups' == -->
<rect class='grp' style='fill:#C4E0F9;stroke:#CED7E0' x='32' y='317' width='752' height='466' />
<text x='44' y='333'>Availability Groups</text>
<rect style='fill:url(#groupUnderTitleLine); stroke-width:2;' x='44' y='337' width='728' height='2' />

<!-- == Group 'Availability Replicas' == -->
<rect class='grp' style='fill:#C4E0F9;stroke:#CED7E0' x='880' y='301' width='816' height='562' />
<text x='892' y='317'>Availability Replicas</text>
<rect style='fill:url(#groupUnderTitleLine); stroke-width:2;' x='892' y='321' width='792' height='2' />

<!-- == Group 'Availability Databases' == -->
<rect class='grp' style='fill:#C4E0F9;stroke:#CED7E0' x='256' y='925' width='272' height='162' />
<text x='268' y='941'>Availability Databases</text>
<rect style='fill:url(#groupUnderTitleLine); stroke-width:2;' x='268' y='945' width='248' height='2' />

<!-- == Group 'Database Replicas' == -->
<rect class='grp' style='fill:#C4E0F9;stroke:#CED7E0' x='944' y='909' width='736' height='674' />
<text x='956' y='925'>Database Replicas</text>
<rect style='fill:url(#groupUnderTitleLine); stroke-width:2;' x='956' y='929' width='712' height='2' />

<!-- == Fk 'availability_groups_cluster_Fk_availability_groups_cluster_availability_groups' == -->
<path id='availability_groups_cluster_Fk_availability_groups_cluster_availability_groups'  onmouseover="hghl(['availability_groups_cluster_Fk_availability_groups_cluster_availability_groups','sys.availability_groups_cluster.group_id','sys.availability_groups.group_id'])" onmouseout="uhghl(['availability_groups_cluster_Fk_availability_groups_cluster_availability_groups','sys.availability_groups_cluster.group_id','sys.availability_groups.group_id'])" transform='translate(8,0)' class='scene' d='M 368 368 L 432,368' >
	<title>Fk Fk_availability_groups_cluster_availability_groups
availability_groups_cluster ref availability_groups ( group_id )</title>
</path>
<path transform='translate(8,0)' marker-start='url(#foot1p)' marker-end='url(#arrow1)'  class='virtual'  d='M 368 368 L 432,368' ></path>
<text x='377' y='363' transform='rotate(0 377,363)' title='Fk Fk_availability_groups_cluster_availability_groups
availability_groups_cluster ref availability_groups ( group_id )' class='relName' style='fill:#748EA7'>group_id</text>
<!-- == Fk 'dm_hadr_availability_replica_cluster_states_Fk_dm_hadr_availability_replica_cluster_states_availability_replicas' == -->
<path id='dm_hadr_availability_replica_cluster_states_Fk_dm_hadr_availability_replica_cluster_states_availability_replicas'  onmouseover="hghl(['dm_hadr_availability_replica_cluster_states_Fk_dm_hadr_availability_replica_cluster_states_availability_replicas','sys.dm_hadr_availability_replica_cluster_states.replica_id','sys.availability_replicas.replica_id'])" onmouseout="uhghl(['dm_hadr_availability_replica_cluster_states_Fk_dm_hadr_availability_replica_cluster_states_availability_replicas','sys.dm_hadr_availability_replica_cluster_states.replica_id','sys.availability_replicas.replica_id'])" transform='translate(8,0)' class='scene' d='M 1360 352 L 1232,352' >
	<title>Fk Fk_dm_hadr_availability_replica_cluster_states_availability_replicas
dm_hadr_availability_replica_cluster_states ref availability_replicas ( replica_id )</title>
</path>
<path transform='translate(8,0)' marker-start='url(#foot1p)' marker-end='url(#arrow01)'  class='virtual'  d='M 1360 352 L 1232,352' ></path>
<text x='1316' y='347' transform='rotate(0 1316,347)' title='Fk Fk_dm_hadr_availability_replica_cluster_states_availability_replicas
dm_hadr_availability_replica_cluster_states ref availability_replicas ( replica_id )' class='relName' style='fill:#748EA7'>replica_id</text>
<!-- == Fk 'availability_databases_cluster_Fk_availability_databases_cluster_availability_groups' == -->
<path id='availability_databases_cluster_Fk_availability_databases_cluster_availability_groups'  onmouseover="hghl(['availability_databases_cluster_Fk_availability_databases_cluster_availability_groups','sys.availability_databases_cluster.group_id','sys.availability_groups.group_id'])" onmouseout="uhghl(['availability_databases_cluster_Fk_availability_databases_cluster_availability_groups','sys.availability_databases_cluster.group_id','sys.availability_groups.group_id'])" transform='translate(8,0)' class='scene' d='M 480 944 L 480,608' >
	<title>Fk Fk_availability_databases_cluster_availability_groups
availability_databases_cluster ref availability_groups ( group_id )</title>
</path>
<path transform='translate(8,0)' marker-start='url(#foot1p)' marker-end='url(#arrow1)'  class='virtual'  d='M 480 944 L 480,608' ></path>
<text x='483' y='939' transform='rotate(270 483,939)' title='Fk Fk_availability_databases_cluster_availability_groups
availability_databases_cluster ref availability_groups ( group_id )' class='relName' style='fill:#748EA7'>group_id</text>
<!-- == Fk 'dm_hadr_availability_replica_states_Fk_dm_hadr_availability_replica_states_availability_replicas' == -->
<path id='dm_hadr_availability_replica_states_Fk_dm_hadr_availability_replica_states_availability_replicas'  onmouseover="hghl(['dm_hadr_availability_replica_states_Fk_dm_hadr_availability_replica_states_availability_replicas','sys.dm_hadr_availability_replica_states.replica_id','sys.availability_replicas.replica_id'])" onmouseout="uhghl(['dm_hadr_availability_replica_states_Fk_dm_hadr_availability_replica_states_availability_replicas','sys.dm_hadr_availability_replica_states.replica_id','sys.availability_replicas.replica_id'])" transform='translate(8,0)' class='scene' d='M 1360 496 L 1232,496' >
	<title>Fk Fk_dm_hadr_availability_replica_states_availability_replicas
dm_hadr_availability_replica_states ref availability_replicas ( replica_id )</title>
</path>
<path transform='translate(8,0)' marker-start='url(#foot1p)' marker-end='url(#arrow01)'  class='virtual'  d='M 1360 496 L 1232,496' ></path>
<text x='1316' y='491' transform='rotate(0 1316,491)' title='Fk Fk_dm_hadr_availability_replica_states_availability_replicas
dm_hadr_availability_replica_states ref availability_replicas ( replica_id )' class='relName' style='fill:#748EA7'>replica_id</text>
<!-- == Fk 'dm_hadr_availability_group_states_Fk_dm_hadr_availability_group_states_availability_groups' == -->
<path id='dm_hadr_availability_group_states_Fk_dm_hadr_availability_group_states_availability_groups'  onmouseover="hghl(['dm_hadr_availability_group_states_Fk_dm_hadr_availability_group_states_availability_groups','sys.dm_hadr_availability_group_states.group_id','sys.availability_groups.group_id'])" onmouseout="uhghl(['dm_hadr_availability_group_states_Fk_dm_hadr_availability_group_states_availability_groups','sys.dm_hadr_availability_group_states.group_id','sys.availability_groups.group_id'])" transform='translate(8,0)' class='scene' d='M 368 624 L 456,624 Q 464,624 464,616 L 464,608' >
	<title>Fk Fk_dm_hadr_availability_group_states_availability_groups
dm_hadr_availability_group_states ref availability_groups ( group_id )</title>
</path>
<path transform='translate(8,0)' marker-start='url(#foot1p)' marker-end='url(#arrow1)'  class='virtual'  d='M 368 624 L 456,624 Q 464,624 464,616 L 464,608' ></path>
<text x='377' y='619' transform='rotate(0 377,619)' title='Fk Fk_dm_hadr_availability_group_states_availability_groups
dm_hadr_availability_group_states ref availability_groups ( group_id )' class='relName' style='fill:#748EA7'>group_id</text>
<!-- == Fk 'availability_replicas_Fk_availability_replicas_availability_groups' == -->
<path id='availability_replicas_Fk_availability_replicas_availability_groups'  onmouseover="hghl(['availability_replicas_Fk_availability_replicas_availability_groups','sys.availability_replicas.group_id','sys.availability_groups.group_id'])" onmouseout="uhghl(['availability_replicas_Fk_availability_replicas_availability_groups','sys.availability_replicas.group_id','sys.availability_groups.group_id'])" transform='translate(8,0)' class='scene' d='M 880 368 L 768,368' >
	<title>Fk Fk_availability_replicas_availability_groups
availability_replicas ref availability_groups ( group_id )</title>
</path>
<path transform='translate(8,0)' marker-start='url(#foot1p)' marker-end='url(#arrow1)'  class='virtual'  d='M 880 368 L 768,368' ></path>
<text x='841' y='363' transform='rotate(0 841,363)' title='Fk Fk_availability_replicas_availability_groups
availability_replicas ref availability_groups ( group_id )' class='relName' style='fill:#748EA7'>group_id</text>
<!-- == Fk 'dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_databases_cluster' == -->
<path id='dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_databases_cluster'  onmouseover="hghl(['dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_databases_cluster','sys.dm_hadr_database_replica_cluster_states.group_database_id','sys.availability_databases_cluster.group_database_id'])" onmouseout="uhghl(['dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_databases_cluster','sys.dm_hadr_database_replica_cluster_states.group_database_id','sys.availability_databases_cluster.group_database_id'])" transform='translate(8,0)' class='scene' d='M 944 976 L 512,976' >
	<title>Fk Fk_dm_hadr_database_replica_cluster_states_availability_databases_cluster
dm_hadr_database_replica_cluster_states ref availability_databases_cluster ( group_database_id )</title>
</path>
<path transform='translate(8,0)' marker-start='url(#foot1p)' marker-end='url(#arrow1)'  class='virtual'  d='M 944 976 L 512,976' ></path>
<text x='847' y='971' transform='rotate(0 847,971)' title='Fk Fk_dm_hadr_database_replica_cluster_states_availability_databases_cluster
dm_hadr_database_replica_cluster_states ref availability_databases_cluster ( group_database_id )' class='relName' style='fill:#748EA7'>group_database_id</text>
<!-- == Fk 'dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_replicas' == -->
<path id='dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_replicas'  onmouseover="hghl(['dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_replicas','sys.dm_hadr_database_replica_cluster_states.replica_id','sys.availability_replicas.replica_id'])" onmouseout="uhghl(['dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_replicas','sys.dm_hadr_database_replica_cluster_states.replica_id','sys.availability_replicas.replica_id'])" transform='translate(8,0)' class='scene' d='M 1216 928 L 1216,720' >
	<title>Fk Fk_dm_hadr_database_replica_cluster_states_availability_replicas
dm_hadr_database_replica_cluster_states ref availability_replicas ( replica_id )</title>
</path>
<path transform='translate(8,0)' marker-start='url(#foot1p)' marker-end='url(#arrow01)'  class='virtual'  d='M 1216 928 L 1216,720' ></path>
<text x='1219' y='923' transform='rotate(270 1219,923)' title='Fk Fk_dm_hadr_database_replica_cluster_states_availability_replicas
dm_hadr_database_replica_cluster_states ref availability_replicas ( replica_id )' class='relName' style='fill:#748EA7'>replica_id</text>
<!-- == Fk 'dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_databases_cluster' == -->
<path id='dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_databases_cluster'  onmouseover="hghl(['dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_databases_cluster','sys.dm_hadr_database_replica_states.group_database_id','sys.availability_databases_cluster.group_database_id'])" onmouseout="uhghl(['dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_databases_cluster','sys.dm_hadr_database_replica_states.group_database_id','sys.availability_databases_cluster.group_database_id'])" transform='translate(8,0)' class='scene' d='M 1376 1136 L 504,1136 Q 496,1136 496,1128 L 496,1072' >
	<title>Fk Fk_dm_hadr_database_replica_states_availability_databases_cluster
dm_hadr_database_replica_states ref availability_databases_cluster ( group_database_id )</title>
</path>
<path transform='translate(8,0)' marker-start='url(#foot1p)' marker-end='url(#arrow1)'  class='virtual'  d='M 1376 1136 L 504,1136 Q 496,1136 496,1128 L 496,1072' ></path>
<text x='1279' y='1131' transform='rotate(0 1279,1131)' title='Fk Fk_dm_hadr_database_replica_states_availability_databases_cluster
dm_hadr_database_replica_states ref availability_databases_cluster ( group_database_id )' class='relName' style='fill:#748EA7'>group_database_id</text>
<!-- == Fk 'dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_replicas' == -->
<path id='dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_replicas'  onmouseover="hghl(['dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_replicas','sys.dm_hadr_database_replica_states.replica_id','sys.availability_replicas.replica_id'])" onmouseout="uhghl(['dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_replicas','sys.dm_hadr_database_replica_states.replica_id','sys.availability_replicas.replica_id'])" transform='translate(8,0)' class='scene' d='M 1376 944 L 1256,944 Q 1248,944 1248,936 L 1248,712 Q 1248,704 1240,704 L 1232,704' >
	<title>Fk Fk_dm_hadr_database_replica_states_availability_replicas
dm_hadr_database_replica_states ref availability_replicas ( replica_id )</title>
</path>
<path transform='translate(8,0)' marker-start='url(#foot1p)' marker-end='url(#arrow01)'  class='virtual'  d='M 1376 944 L 1256,944 Q 1248,944 1248,936 L 1248,712 Q 1248,704 1240,704 L 1232,704' ></path>
<text x='1332' y='939' transform='rotate(0 1332,939)' title='Fk Fk_dm_hadr_database_replica_states_availability_replicas
dm_hadr_database_replica_states ref availability_replicas ( replica_id )' class='relName' style='fill:#748EA7'>replica_id</text>
<!-- == Fk 'availability_group_listeners_Fk_availability_group_listeners_availability_groups' == -->
<path id='availability_group_listeners_Fk_availability_group_listeners_availability_groups'  onmouseover="hghl(['availability_group_listeners_Fk_availability_group_listeners_availability_groups','sys.availability_group_listeners.group_id','sys.availability_groups.group_id'])" onmouseout="uhghl(['availability_group_listeners_Fk_availability_group_listeners_availability_groups','sys.availability_group_listeners.group_id','sys.availability_groups.group_id'])" transform='translate(8,0)' class='scene' d='M 464 240 L 464,336' >
	<title>Fk Fk_availability_group_listeners_availability_groups
availability_group_listeners ref availability_groups ( group_id )</title>
</path>
<path transform='translate(8,0)' marker-start='url(#foot1p)' marker-end='url(#arrow1)'  class='virtual'  d='M 464 240 L 464,336' ></path>
<text x='479' y='241' transform='rotate(90 479,241)' title='Fk Fk_availability_group_listeners_availability_groups
availability_group_listeners ref availability_groups ( group_id )' class='relName' style='fill:#748EA7'>group_id</text>
<!-- == Fk 'availability_group_listener_ip_addresses_Fk_availability_group_listener_ip_addresses_availability_group_listeners' == -->
<path id='availability_group_listener_ip_addresses_Fk_availability_group_listener_ip_addresses_availability_group_listeners'  onmouseover="hghl(['availability_group_listener_ip_addresses_Fk_availability_group_listener_ip_addresses_availability_group_listeners','sys.availability_group_listener_ip_addresses.listener_id','sys.availability_group_listeners.listener_id'])" onmouseout="uhghl(['availability_group_listener_ip_addresses_Fk_availability_group_listener_ip_addresses_availability_group_listeners','sys.availability_group_listener_ip_addresses.listener_id','sys.availability_group_listeners.listener_id'])" transform='translate(8,0)' class='scene' d='M 928 112 L 784,112' >
	<title>Fk Fk_availability_group_listener_ip_addresses_availability_group_listeners
availability_group_listener_ip_addresses ref availability_group_listeners ( listener_id )</title>
</path>
<path transform='translate(8,0)' marker-start='url(#foot1p)' marker-end='url(#arrow1)'  class='virtual'  d='M 928 112 L 784,112' ></path>
<text x='880' y='107' transform='rotate(0 880,107)' title='Fk Fk_availability_group_listener_ip_addresses_availability_group_listeners
availability_group_listener_ip_addresses ref availability_group_listeners ( listener_id )' class='relName' style='fill:#748EA7'>listener_id</text>
<!-- == Table 'availability_groups_cluster' == -->
<rect class='entity' x='48' y='344' width='320' height='176' rx='8' ry='8' style='stroke:none'/>
<path d='M 48 372 L 48 352 Q 48 344 56 344 L 360 344 Q 368 344 368 352 L 368 372 L48 372 ' style='fill:url(#tbg_669999);stroke:1;stroke-opacity:0.1;' />
<rect class='entity' x='48' y='344' width='320' height='176' rx='8' ry='8' style='fill:none;stroke:#669999'/>
<a xlink:href='#availability_groups_cluster'><text x='118' y='364'>sys.availability_groups_cluster</text><title>Table sys.availability_groups_cluster
Returns a row for each Always On availability group in the Windows Server Failover Clustering (WSFC) . Each row contains the availability group metadata from the WSFC cluster.</title></a>
  <use id='nn' x='50' y='381' xlink:href='#nn'/><a xlink:href='#availability_groups_cluster.group_id'><text id='sys.availability_groups_cluster.group_id' x='67' y='391' onmouseover="hghl(['availability_groups_cluster_Fk_availability_groups_cluster_availability_groups','sys.availability_groups.group_id'])" onmouseout="uhghl(['availability_groups_cluster_Fk_availability_groups_cluster_availability_groups','sys.availability_groups.group_id'])">group_id</text><text x='352' y='392' text-anchor='end' class='colType'>uniqueidentifier</text><title>group_id
* uniqueidentifier
Unique identifier (GUID) of the availability group.</title></a>
<a xlink:href='#availability_groups_cluster.group_id'><use id='fk' x='356' y='380' xlink:href='#fk'/><title>References availability_groups ( group_id ) </title></a>
  <a xlink:href='#availability_groups_cluster.name'><text id='sys.availability_groups_cluster.name' x='67' y='407'>name</text><text x='352' y='408' text-anchor='end' class='colType'>sysname</text><title>name
sysname
Name of the availability group. This is a user-specified name that must be unique within the Windows Server Failover Cluster (WSFC).</title></a>
  <a xlink:href='#availability_groups_cluster.resource_id'><text id='sys.availability_groups_cluster.resource_id' x='67' y='423'>resource_id</text><text x='352' y='424' text-anchor='end' class='colType'>nvarchar(40)</text><title>resource_id
nvarchar(40)
Resource ID for the WSFC cluster resource.</title></a>
  <a xlink:href='#availability_groups_cluster.resource_group_id'><text id='sys.availability_groups_cluster.resource_group_id' x='67' y='439'>resource_group_id</text><text x='352' y='440' text-anchor='end' class='colType'>nvarchar(40)</text><title>resource_group_id
nvarchar(40)
Resource Group ID for the WSFC cluster resource group of the availability group.</title></a>
  <a xlink:href='#availability_groups_cluster.failure_condition_level'><text id='sys.availability_groups_cluster.failure_condition_level' x='67' y='455'>failure_condition_level</text><text x='352' y='456' text-anchor='end' class='colType'>int</text><title>failure_condition_level
int
User-defined failure condition level under which an automatic failover must be triggered, one of the following integer values:

1: Specifies that an automatic failover should be initiated when any of the following occurs: 
- The SQL Server service is down.
- The lease of the availability group for connecting to the WSFC failover cluster expires because no ACK is received from the server instance. For more information, see How It Works: SQL Server Always On Lease Timeout.

2: Specifies that an automatic failover should be initiated when any of the following occurs: 
- The instance of SQL Server does not connect to cluster, and the user-specified health_check_timeout threshold of the availability group is exceeded. 
- The availability replica is in failed state. 
3: Specifies that an automatic failover should be initiated on critical SQL Server internal errors, such as orphaned spinlocks, serious write-access violations, or too much dumping. This is the default value. 
4: Specifies that an automatic failover should be initiated on moderate SQL Server internal errors, such as a persistent out-of-memory condition in the SQL Server internal resource pool.
5: Specifies that an automatic failover should be initiated on any qualified failure conditions, including:
- Exhaustion of SQL Engine worker-threads. 
- Detection of an unsolvable deadlock.

The failure-condition levels (1–5) range from the least restrictive, level 1, to the most restrictive, level 5. A given condition level encompasses all of the less restrictive levels. Thus, the strictest condition level, 5, includes the four less restrictive condition levels (1-4), level 4 includes levels 1-3, and so forth.

To change this value, use the FAILURE_CONDITION_LEVEL option of the ALTER AVAILABILITY GROUP Transact-SQL statement.</title></a>
  <a xlink:href='#availability_groups_cluster.health_check_timeout'><text id='sys.availability_groups_cluster.health_check_timeout' x='67' y='471'>health_check_timeout</text><text x='352' y='472' text-anchor='end' class='colType'>int</text><title>health_check_timeout
int
Wait time (in milliseconds) for the sp_server_diagnostics system stored procedure to return server-health information, before the server instance is assumed to be slow or hung. The default value is 30000 milliseconds (30 seconds).

To change this value, use the HEALTH_CHECK_TIMEOUT option of ALTER AVAILABILITY GROUP Transact-SQL statement.</title></a>
  <a xlink:href='#availability_groups_cluster.automated_backup_preference'><text id='sys.availability_groups_cluster.automated_backup_preference' x='67' y='487'>automated_backup_preference</text><text x='352' y='488' text-anchor='end' class='colType'>tinyint</text><title>automated_backup_preference
tinyint
Preferred location for performing backups on the availability databases in this availability group. One of the following values:

0: Primary. Backups should always occur on the primary replica.
1: Secondary only. Performing backups on a secondary replica is preferable.
2: Prefer Secondary. Performing backups on a secondary replica preferable, but performing backups on the primary replica is acceptable if no secondary replica is available for backup operations. This is the default behavior.
3: Any Replica. No preference about whether backups are performed on the primary replica or on a secondary replica.

For more information, see Active Secondaries: Backup on Secondary Replicas (Always On Availability Groups).</title></a>
  <a xlink:href='#availability_groups_cluster.automated_backup_preference_desc'><text id='sys.availability_groups_cluster.automated_backup_preference_desc' x='67' y='503'>automated_backup_preference_desc</text><text x='352' y='504' text-anchor='end' class='colType'>nvarchar(60)</text><title>automated_backup_preference_desc
nvarchar(60)
Description of automated_backup_preference, one of:

PRIMARY

SECONDARY_ONLY

SECONDARY

NONE</title></a>

<!-- == Table 'dm_hadr_availability_replica_cluster_nodes' == -->
<rect class='entity' x='912' y='744' width='288' height='96' rx='8' ry='8' style='stroke:none'/>
<path d='M 912 772 L 912 752 Q 912 744 920 744 L 1192 744 Q 1200 744 1200 752 L 1200 772 L912 772 ' style='fill:url(#tbg_B3801A);stroke:1;stroke-opacity:0.1;' />
<rect class='entity' x='912' y='744' width='288' height='96' rx='8' ry='8' style='fill:none;stroke:#B3801A'/>
<a xlink:href='#dm_hadr_availability_replica_cluster_nodes'><text x='920' y='764'>sys.dm_hadr_availability_replica_cluster_nodes</text><title>Table sys.dm_hadr_availability_replica_cluster_nodes
Returns a row for every availability replica (regardless of join state) of the Always On availability groups in the Windows Server Failover Clustering (WSFC) cluster.</title></a>
  <use id='nn' x='914' y='781' xlink:href='#nn'/><a xlink:href='#dm_hadr_availability_replica_cluster_nodes.group_name'><text id='sys.dm_hadr_availability_replica_cluster_nodes.group_name' x='931' y='791'>group_name</text><text x='1184' y='792' text-anchor='end' class='colType'>nvarchar(256)</text><title>group_name
* nvarchar(256)
Name of the availability group.</title></a>
  <use id='nn' x='914' y='797' xlink:href='#nn'/><a xlink:href='#dm_hadr_availability_replica_cluster_nodes.replica_server_name'><text id='sys.dm_hadr_availability_replica_cluster_nodes.replica_server_name' x='931' y='807'>replica_server_name</text><text x='1184' y='808' text-anchor='end' class='colType'>nvarchar(256)</text><title>replica_server_name
* nvarchar(256)
Name of the instance of SQL Server hosting the replica.</title></a>
  <use id='nn' x='914' y='813' xlink:href='#nn'/><a xlink:href='#dm_hadr_availability_replica_cluster_nodes.node_name'><text id='sys.dm_hadr_availability_replica_cluster_nodes.node_name' x='931' y='823'>node_name</text><text x='1184' y='824' text-anchor='end' class='colType'>nvarchar(256)</text><title>node_name
* nvarchar(256)
Name of the cluster node.</title></a>

<!-- == Table 'dm_hadr_availability_replica_cluster_states' == -->
<rect class='entity' x='1376' y='344' width='288' height='128' rx='8' ry='8' style='stroke:none'/>
<path d='M 1376 372 L 1376 352 Q 1376 344 1384 344 L 1656 344 Q 1664 344 1664 352 L 1664 372 L1376 372 ' style='fill:url(#tbg_B3801A);stroke:1;stroke-opacity:0.1;' />
<rect class='entity' x='1376' y='344' width='288' height='128' rx='8' ry='8' style='fill:none;stroke:#B3801A'/>
<a xlink:href='#dm_hadr_availability_replica_cluster_states'><text x='1384' y='364'>sys.dm_hadr_availability_replica_cluster_states</text><title>Table sys.dm_hadr_availability_replica_cluster_states
Returns a row for each Always On availability replica (regardless of its join state) of all Always On availability groups (regardless of replica location) in the Windows Server Failover Clustering (WSFC) cluster.</title></a>
  <use id='nn' x='1378' y='381' xlink:href='#nn'/><a xlink:href='#dm_hadr_availability_replica_cluster_states.replica_id'><text id='sys.dm_hadr_availability_replica_cluster_states.replica_id' x='1395' y='391' onmouseover="hghl(['dm_hadr_availability_replica_cluster_states_Fk_dm_hadr_availability_replica_cluster_states_availability_replicas','sys.availability_replicas.replica_id'])" onmouseout="uhghl(['dm_hadr_availability_replica_cluster_states_Fk_dm_hadr_availability_replica_cluster_states_availability_replicas','sys.availability_replicas.replica_id'])">replica_id</text><text x='1648' y='392' text-anchor='end' class='colType'>uniqueidentifier</text><title>replica_id
* uniqueidentifier
Unique identifier of the availability replica.</title></a>
<a xlink:href='#dm_hadr_availability_replica_cluster_states.replica_id'><use id='fk' x='1652' y='380' xlink:href='#fk'/><title>References availability_replicas ( replica_id ) </title></a>
  <use id='nn' x='1378' y='397' xlink:href='#nn'/><a xlink:href='#dm_hadr_availability_replica_cluster_states.replica_server_name'><text id='sys.dm_hadr_availability_replica_cluster_states.replica_server_name' x='1395' y='407'>replica_server_name</text><text x='1648' y='408' text-anchor='end' class='colType'>nvarchar(256)</text><title>replica_server_name
* nvarchar(256)
Name of the instance of SQL Server hosting the replica.</title></a>
  <use id='nn' x='1378' y='413' xlink:href='#nn'/><a xlink:href='#dm_hadr_availability_replica_cluster_states.group_id'><text id='sys.dm_hadr_availability_replica_cluster_states.group_id' x='1395' y='423'>group_id</text><text x='1648' y='424' text-anchor='end' class='colType'>uniqueidentifier</text><title>group_id
* uniqueidentifier
Unique identifier of the availability group.</title></a>
  <use id='nn' x='1378' y='429' xlink:href='#nn'/><a xlink:href='#dm_hadr_availability_replica_cluster_states.join_state'><text id='sys.dm_hadr_availability_replica_cluster_states.join_state' x='1395' y='439'>join_state</text><text x='1648' y='440' text-anchor='end' class='colType'>tinyint</text><title>join_state
* tinyint
0 = Not joined

1 = Joined, standalone instance

2 = Joined, failover cluster instance</title></a>
  <a xlink:href='#dm_hadr_availability_replica_cluster_states.join_state_desc'><text id='sys.dm_hadr_availability_replica_cluster_states.join_state_desc' x='1395' y='455'>join_state_desc</text><text x='1648' y='456' text-anchor='end' class='colType'>nvarchar(60)</text><title>join_state_desc
nvarchar(60)
NOT_JOINED

JOINED_STANDALONE_INSTANCE

JOINED_FAILOVER_CLUSTER_INSTANCE</title></a>

<!-- == Table 'availability_databases_cluster' == -->
<rect class='entity' x='272' y='952' width='240' height='112' rx='8' ry='8' style='stroke:none'/>
<path d='M 272 980 L 272 960 Q 272 952 280 952 L 504 952 Q 512 952 512 960 L 512 980 L272 980 ' style='fill:url(#tbg_3986C1);stroke:1;stroke-opacity:0.1;' />
<rect class='entity' x='272' y='952' width='240' height='112' rx='8' ry='8' style='fill:none;stroke:#3986C1'/>
<a xlink:href='#availability_databases_cluster'><text x='293' y='972'>sys.availability_databases_cluster</text><title>Table sys.availability_databases_cluster
Contains one row for each availability database on the instance of SQL Server that is hosting an availability replica for any Always On availability group in the Windows Server Failover Clustering (WSFC) cluster, regardless of whether the local copy database has been joined to the availability group yet.</title></a>
  <use id='nn' x='274' y='989' xlink:href='#nn'/><a xlink:href='#availability_databases_cluster.group_id'><text id='sys.availability_databases_cluster.group_id' x='291' y='999' onmouseover="hghl(['availability_databases_cluster_Fk_availability_databases_cluster_availability_groups','sys.availability_groups.group_id'])" onmouseout="uhghl(['availability_databases_cluster_Fk_availability_databases_cluster_availability_groups','sys.availability_groups.group_id'])">group_id</text><text x='496' y='1000' text-anchor='end' class='colType'>uniqueidentifier</text><title>group_id
* uniqueidentifier
Unique identifier of the availability group in which the availability group, if any, in which the database is participating.

NULL = database is not part of an availability replica of in availability group.</title></a>
<a xlink:href='#availability_databases_cluster.group_id'><use id='fk' x='500' y='988' xlink:href='#fk'/><title>References availability_groups ( group_id ) </title></a>
  <use id='nn' x='274' y='1005' xlink:href='#nn'/><a xlink:href='#availability_databases_cluster.group_database_id'><text id='sys.availability_databases_cluster.group_database_id' x='291' y='1015' onmouseover="hghl(['dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_databases_cluster','sys.dm_hadr_database_replica_cluster_states.group_database_id','dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_databases_cluster','sys.dm_hadr_database_replica_states.group_database_id'])" onmouseout="uhghl(['dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_databases_cluster','sys.dm_hadr_database_replica_cluster_states.group_database_id','dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_databases_cluster','sys.dm_hadr_database_replica_states.group_database_id'])">group_database_id</text><text x='496' y='1016' text-anchor='end' class='colType'>uniqueidentifier</text><title>group_database_id
* uniqueidentifier
Unique identifier of the database within the availability group, if any, in which the database is participating. group_database_id is the same for this database on the primary replica and on every secondary replica on which the database has been joined to the availability group.

NULL = database is not part of an availability replica in any availability group.</title></a>
<a xlink:href='#availability_databases_cluster.group_database_id'><use id='ref' x='500' y='1004' xlink:href='#ref'/><title>Referred by dm_hadr_database_replica_cluster_states ( group_database_id ) 
Referred by dm_hadr_database_replica_states ( group_database_id ) </title></a>
  <a xlink:href='#availability_databases_cluster.database_name'><use id='null' x='496' y='1020' xlink:href='#flag2'/></a>
<a xlink:href='#availability_databases_cluster.database_name'><text id='sys.availability_databases_cluster.database_name' x='291' y='1031'>database_name</text><text x='496' y='1032' text-anchor='end' class='colType'>sysname</text><title>database_name
sysname
Name of the database that was added to the availability group.</title></a>
  <a xlink:href='#availability_databases_cluster.truncation_lsn'><text id='sys.availability_databases_cluster.truncation_lsn' x='291' y='1047'>truncation_lsn</text><text x='496' y='1048' text-anchor='end' class='colType'>numeric(25,0)</text><title>truncation_lsn
numeric(25,0)</title></a>

<!-- == Table 'availability_groups' == -->
<rect class='entity' x='448' y='344' width='320' height='256' rx='8' ry='8' style='stroke:none'/>
<path d='M 448 372 L 448 352 Q 448 344 456 344 L 760 344 Q 768 344 768 352 L 768 372 L448 372 ' style='fill:url(#tbg_3986C1);stroke:1;stroke-opacity:0.1;' />
<rect class='entity' x='448' y='344' width='320' height='256' rx='8' ry='8' style='fill:none;stroke:#3986C1'/>
<a xlink:href='#availability_groups'><text x='540' y='364'>sys.availability_groups</text><title>Table sys.availability_groups
Returns a row for each availability group for which the local instance of SQL Server hosts an availability replica. Each row contains a cached copy of the availability group metadata.</title></a>
  <use id='nn' x='450' y='381' xlink:href='#nn'/><a xlink:href='#availability_groups.group_id'><text id='sys.availability_groups.group_id' x='467' y='391' onmouseover="hghl(['availability_databases_cluster_Fk_availability_databases_cluster_availability_groups','sys.availability_databases_cluster.group_id','availability_group_listeners_Fk_availability_group_listeners_availability_groups','sys.availability_group_listeners.group_id','availability_groups_cluster_Fk_availability_groups_cluster_availability_groups','sys.availability_groups_cluster.group_id','availability_replicas_Fk_availability_replicas_availability_groups','sys.availability_replicas.group_id','dm_hadr_availability_group_states_Fk_dm_hadr_availability_group_states_availability_groups','sys.dm_hadr_availability_group_states.group_id'])" onmouseout="uhghl(['availability_databases_cluster_Fk_availability_databases_cluster_availability_groups','sys.availability_databases_cluster.group_id','availability_group_listeners_Fk_availability_group_listeners_availability_groups','sys.availability_group_listeners.group_id','availability_groups_cluster_Fk_availability_groups_cluster_availability_groups','sys.availability_groups_cluster.group_id','availability_replicas_Fk_availability_replicas_availability_groups','sys.availability_replicas.group_id','dm_hadr_availability_group_states_Fk_dm_hadr_availability_group_states_availability_groups','sys.dm_hadr_availability_group_states.group_id'])">group_id</text><text x='752' y='392' text-anchor='end' class='colType'>uniqueidentifier</text><title>group_id
* uniqueidentifier
Unique identifier (GUID) of the availability group.</title></a>
<a xlink:href='#availability_groups.group_id'><use id='ref' x='756' y='380' xlink:href='#ref'/><title>Referred by availability_databases_cluster ( group_id ) 
Referred by availability_group_listeners ( group_id ) 
Referred by availability_groups_cluster ( group_id ) 
Referred by availability_replicas ( group_id ) 
Referred by dm_hadr_availability_group_states ( group_id ) </title></a>
  <a xlink:href='#availability_groups.name'><use id='null' x='752' y='396' xlink:href='#flag2'/></a>
<a xlink:href='#availability_groups.name'><text id='sys.availability_groups.name' x='467' y='407'>name</text><text x='752' y='408' text-anchor='end' class='colType'>sysname</text><title>name
sysname
Name of the availability group. This is a user-specified name that must be unique within the Windows Server Failover Cluster (WSFC).</title></a>
  <a xlink:href='#availability_groups.resource_id'><text id='sys.availability_groups.resource_id' x='467' y='423'>resource_id</text><text x='752' y='424' text-anchor='end' class='colType'>nvarchar(40)</text><title>resource_id
nvarchar(40)
Resource ID for the WSFC cluster resource.</title></a>
  <a xlink:href='#availability_groups.resource_group_id'><text id='sys.availability_groups.resource_group_id' x='467' y='439'>resource_group_id</text><text x='752' y='440' text-anchor='end' class='colType'>nvarchar(40)</text><title>resource_group_id
nvarchar(40)
Resource Group ID for the WSFC cluster resource group of the availability group.</title></a>
  <a xlink:href='#availability_groups.failure_condition_level'><text id='sys.availability_groups.failure_condition_level' x='467' y='455'>failure_condition_level</text><text x='752' y='456' text-anchor='end' class='colType'>int</text><title>failure_condition_level
int
User-defined failure condition level under which an automatic failover must be triggered, one of the integer values shown in the table immediately below this table.

The failure-condition levels (1–5) range from the least restrictive, level 1, to the most restrictive, level 5. A given condition level encompasses all of the less restrictive levels. Thus, the strictest condition level, 5, includes the four less restrictive condition levels (1-4), level 4 includes levels 1-3, and so forth.

To change this value, use the FAILURE_CONDITION_LEVEL option of the ALTER AVAILABILITY GROUP Transact-SQL statement.</title></a>
  <a xlink:href='#availability_groups.health_check_timeout'><text id='sys.availability_groups.health_check_timeout' x='467' y='471'>health_check_timeout</text><text x='752' y='472' text-anchor='end' class='colType'>int</text><title>health_check_timeout
int
Wait time (in milliseconds) for the sp_server_diagnostics system stored procedure to return server-health information, before the server instance is assumed to be slow or hung. The default value is 30000 milliseconds (30 seconds).

To change this value, use the HEALTH_CHECK_TIMEOUT option of the ALTER AVAILABILITY GROUP Transact-SQL statement.</title></a>
  <a xlink:href='#availability_groups.automated_backup_preference'><text id='sys.availability_groups.automated_backup_preference' x='467' y='487'>automated_backup_preference</text><text x='752' y='488' text-anchor='end' class='colType'>tinyint</text><title>automated_backup_preference
tinyint
Preferred location for performing backups on the availability databases in this availability group. The following are the possible values and their descriptions.



0 : Primary. Backups should always occur on the primary replica.

1 : Secondary only. Performing backups on a secondary replica is preferable.

2 : Prefer Secondary. Performing backups on a secondary replica preferable, but performing backups on the primary replica is acceptable if no secondary replica is available for backup operations. This is the default behavior.

3 : Any Replica. No preference about whether backups are performed on the primary replica or on a secondary replica.



For more information, see Active Secondaries: Backup on Secondary Replicas (Always On Availability Groups).</title></a>
  <a xlink:href='#availability_groups.automated_backup_preference_desc'><text id='sys.availability_groups.automated_backup_preference_desc' x='467' y='503'>automated_backup_preference_desc</text><text x='752' y='504' text-anchor='end' class='colType'>nvarchar(60)</text><title>automated_backup_preference_desc
nvarchar(60)
Description of automated_backup_preference, one of:

PRIMARY

SECONDARY_ONLY

SECONDARY

NONE</title></a>
  <a xlink:href='#availability_groups.version'><text id='sys.availability_groups.version' x='467' y='519'>version</text><text x='752' y='520' text-anchor='end' class='colType'>smallint</text><title>version
smallint
The version of the availability group metadata stored in the Windows Failover Cluster. This version number is incremented when new features are added.</title></a>
  <a xlink:href='#availability_groups.basic_features'><text id='sys.availability_groups.basic_features' x='467' y='535'>basic_features</text><text x='752' y='536' text-anchor='end' class='colType'>bit</text><title>basic_features
bit
Specifies whether this is a Basic availability group. For more information, see Basic Availability Groups (Always On Availability Groups).</title></a>
  <a xlink:href='#availability_groups.dtc_support'><text id='sys.availability_groups.dtc_support' x='467' y='551'>dtc_support</text><text x='752' y='552' text-anchor='end' class='colType'>bit</text><title>dtc_support
bit
Specifies whether DTC support has been enabled for this availability group. The DTC_SUPPORT option of CREATE AVAILABILITY GROUP controls this setting.</title></a>
  <a xlink:href='#availability_groups.db_failover'><text id='sys.availability_groups.db_failover' x='467' y='567'>db_failover</text><text x='752' y='568' text-anchor='end' class='colType'>bit</text><title>db_failover
bit
Specifies whether the availability group supports failover for database health conditions. The DB_FAILOVER option of CREATE AVAILABILITY GROUP controls this setting.</title></a>
  <a xlink:href='#availability_groups.is_distributed'><text id='sys.availability_groups.is_distributed' x='467' y='583'>is_distributed</text><text x='752' y='584' text-anchor='end' class='colType'>bit</text><title>is_distributed
bit
Specifies whether this is a distributed availability group. For more information, see Distributed Availability Groups (Always On Availability Groups).</title></a>

<!-- == Table 'dm_hadr_availability_replica_states' == -->
<rect class='entity' x='1376' y='488' width='304' height='304' rx='8' ry='8' style='stroke:none'/>
<path d='M 1376 516 L 1376 496 Q 1376 488 1384 488 L 1672 488 Q 1680 488 1680 496 L 1680 516 L1376 516 ' style='fill:url(#tbg_B3801A);stroke:1;stroke-opacity:0.1;' />
<rect class='entity' x='1376' y='488' width='304' height='304' rx='8' ry='8' style='fill:none;stroke:#B3801A'/>
<a xlink:href='#dm_hadr_availability_replica_states'><text x='1414' y='508'>sys.dm_hadr_availability_replica_states</text><title>Table sys.dm_hadr_availability_replica_states
Returns a row for each local replica and a row for each remote replica in the same Always On availability group as a local replica. Each row contains information about the state of a given replica.</title></a>
  <use id='nn' x='1378' y='525' xlink:href='#nn'/><a xlink:href='#dm_hadr_availability_replica_states.replica_id'><text id='sys.dm_hadr_availability_replica_states.replica_id' x='1395' y='535' onmouseover="hghl(['dm_hadr_availability_replica_states_Fk_dm_hadr_availability_replica_states_availability_replicas','sys.availability_replicas.replica_id'])" onmouseout="uhghl(['dm_hadr_availability_replica_states_Fk_dm_hadr_availability_replica_states_availability_replicas','sys.availability_replicas.replica_id'])">replica_id</text><text x='1664' y='536' text-anchor='end' class='colType'>uniqueidentifier</text><title>replica_id
* uniqueidentifier
Unique identifier of the replica.</title></a>
<a xlink:href='#dm_hadr_availability_replica_states.replica_id'><use id='fk' x='1668' y='524' xlink:href='#fk'/><title>References availability_replicas ( replica_id ) </title></a>
  <use id='nn' x='1378' y='541' xlink:href='#nn'/><a xlink:href='#dm_hadr_availability_replica_states.group_id'><text id='sys.dm_hadr_availability_replica_states.group_id' x='1395' y='551'>group_id</text><text x='1664' y='552' text-anchor='end' class='colType'>uniqueidentifier</text><title>group_id
* uniqueidentifier
Unique identifier of the availability group.</title></a>
  <use id='nn' x='1378' y='557' xlink:href='#nn'/><a xlink:href='#dm_hadr_availability_replica_states.is_local'><use id='null' x='1664' y='556' xlink:href='#flag2'/></a>
<a xlink:href='#dm_hadr_availability_replica_states.is_local'><text id='sys.dm_hadr_availability_replica_states.is_local' x='1395' y='567'>is_local</text><text x='1664' y='568' text-anchor='end' class='colType'>bit</text><title>is_local
* bit
Whether the replica is local, one of:

0 = Indicates a remote secondary replica in an availability group whose primary replica is hosted by the local server instance. This value occurs only on the primary replica location.

1 = Indicates a local replica. On secondary replicas, this is the only available value for the availability group to which the replica belongs.</title></a>
  <a xlink:href='#dm_hadr_availability_replica_states.role'><use id='null' x='1664' y='572' xlink:href='#flag2'/></a>
<a xlink:href='#dm_hadr_availability_replica_states.role'><text id='sys.dm_hadr_availability_replica_states.role' x='1395' y='583'>role</text><text x='1664' y='584' text-anchor='end' class='colType'>tinyint</text><title>role
tinyint
Current Always On availability groups role of a local replica or a connected remote replica, one of:

0 = Resolving

1 = Primary

2 = Secondary

For information about Always On availability groups roles, see Overview of Always On Availability Groups (SQL Server).</title></a>
  <a xlink:href='#dm_hadr_availability_replica_states.role_desc'><text id='sys.dm_hadr_availability_replica_states.role_desc' x='1395' y='599'>role_desc</text><text x='1664' y='600' text-anchor='end' class='colType'>nvarchar(60)</text><title>role_desc
nvarchar(60)
Description of role, one of:

RESOLVING

PRIMARY

SECONDARY</title></a>
  <a xlink:href='#dm_hadr_availability_replica_states.operational_state'><text id='sys.dm_hadr_availability_replica_states.operational_state' x='1395' y='615'>operational_state</text><text x='1664' y='616' text-anchor='end' class='colType'>tinyint</text><title>operational_state
tinyint
Current operational state of the replica, one of:

0 = Pending failover

1 = Pending

2 = Online

3 = Offline

4 = Failed

5 = Failed, no quorum

NULL = Replica is not local.

For more information, see Roles and Operational States, later in this topic.</title></a>
  <a xlink:href='#dm_hadr_availability_replica_states.operational_state_desc'><text id='sys.dm_hadr_availability_replica_states.operational_state_desc' x='1395' y='631'>operational_state_desc</text><text x='1664' y='632' text-anchor='end' class='colType'>nvarchar(60)</text><title>operational_state_desc
nvarchar(60)
Description of operational_state, one of:

PENDING_FAILOVER

PENDING

ONLINE

OFFLINE

FAILED

FAILED_NO_QUORUM

NULL</title></a>
  <a xlink:href='#dm_hadr_availability_replica_states.connected_state'><use id='null' x='1664' y='636' xlink:href='#flag2'/></a>
<a xlink:href='#dm_hadr_availability_replica_states.connected_state'><text id='sys.dm_hadr_availability_replica_states.connected_state' x='1395' y='647'>connected_state</text><text x='1664' y='648' text-anchor='end' class='colType'>tinyint</text><title>connected_state
tinyint
Whether a secondary replica is currently connected to the primary replica. The possible values are shown below with their descriptions.

0 : Disconnected. The response of an availability replica to the DISCONNECTED state depends on its role: On the primary replica, if a secondary replica is disconnected, its secondary databases are marked as NOT SYNCHRONIZED on the primary replica, which waits for the secondary to reconnect; On a secondary replica, upon detecting that it is disconnected, the secondary replica attempts to reconnect to the primary replica.

1 : Connected.

Each primary replica tracks the connection state for every secondary replica in the same availability group. Secondary replicas track the connection state of only the primary replica.</title></a>
  <a xlink:href='#dm_hadr_availability_replica_states.connected_state_desc'><text id='sys.dm_hadr_availability_replica_states.connected_state_desc' x='1395' y='663'>connected_state_desc</text><text x='1664' y='664' text-anchor='end' class='colType'>nvarchar(60)</text><title>connected_state_desc
nvarchar(60)
Description of connection_state, one of:

DISCONNECTED

CONNECTED</title></a>
  <a xlink:href='#dm_hadr_availability_replica_states.recovery_health'><text id='sys.dm_hadr_availability_replica_states.recovery_health' x='1395' y='679'>recovery_health</text><text x='1664' y='680' text-anchor='end' class='colType'>tinyint</text><title>recovery_health
tinyint
Rollup of the database_state column of the sys.dm_hadr_database_replica_states dynamic management view. The following are the possible values and their descriptions.

0 : In progress. At least one joined database has a database state other than ONLINE (database_state is not 0).

1 : Online. All the joined databases have a database state of ONLINE (database_state is 0).

NULL : is_local = 0</title></a>
  <a xlink:href='#dm_hadr_availability_replica_states.recovery_health_desc'><text id='sys.dm_hadr_availability_replica_states.recovery_health_desc' x='1395' y='695'>recovery_health_desc</text><text x='1664' y='696' text-anchor='end' class='colType'>nvarchar(60)</text><title>recovery_health_desc
nvarchar(60)
Description of recovery_health, one of:

ONLINE_IN_PROGRESS

ONLINE

NULL</title></a>
  <a xlink:href='#dm_hadr_availability_replica_states.synchronization_health'><text id='sys.dm_hadr_availability_replica_states.synchronization_health' x='1395' y='711'>synchronization_health</text><text x='1664' y='712' text-anchor='end' class='colType'>tinyint</text><title>synchronization_health
tinyint
Reflects a rollup of the database synchronization state (synchronization_state)of all joined availability databases (also known as replicas) and the availability mode of the replica (synchronous-commit or asynchronous-commit mode). The rollup will reflect the least healthy accumulated state the databases on the replica. Below are the possible values and their descriptions.

0 : Not healthy. At least one joined database is in the NOT SYNCHRONIZING state.

1 : Partially healthy. Some replicas are not in the target synchronization state: synchronous-commit replicas should be synchronized, and asynchronous-commit replicas should be synchronizing.

2 : Healthy. All replicas are in the target synchronization state: synchronous-commit replicas are synchronized, and asynchronous-commit replicas are synchronizing.</title></a>
  <a xlink:href='#dm_hadr_availability_replica_states.synchronization_health_desc'><text id='sys.dm_hadr_availability_replica_states.synchronization_health_desc' x='1395' y='727'>synchronization_health_desc</text><text x='1664' y='728' text-anchor='end' class='colType'>nvarchar(60)</text><title>synchronization_health_desc
nvarchar(60)
Description of synchronization_health, one of:

NOT_HEALTHY

PARTIALLY_HEALTHY

HEALTHY</title></a>
  <a xlink:href='#dm_hadr_availability_replica_states.last_connect_error_number'><text id='sys.dm_hadr_availability_replica_states.last_connect_error_number' x='1395' y='743'>last_connect_error_number</text><text x='1664' y='744' text-anchor='end' class='colType'>int</text><title>last_connect_error_number
int
Number of the last connection error.</title></a>
  <a xlink:href='#dm_hadr_availability_replica_states.last_connect_error_description'><text id='sys.dm_hadr_availability_replica_states.last_connect_error_description' x='1395' y='759'>last_connect_error_description</text><text x='1664' y='760' text-anchor='end' class='colType'>nvarchar(1024)</text><title>last_connect_error_description
nvarchar(1024)
Text of the last_connect_error_number message.</title></a>
  <a xlink:href='#dm_hadr_availability_replica_states.last_connect_error_timestamp'><text id='sys.dm_hadr_availability_replica_states.last_connect_error_timestamp' x='1395' y='775'>last_connect_error_timestamp</text><text x='1664' y='776' text-anchor='end' class='colType'>datetime</text><title>last_connect_error_timestamp
datetime
Date and time timestamp indicating when the last_connect_error_number error occurred.</title></a>

<!-- == Table 'dm_hadr_availability_group_states' == -->
<rect class='entity' x='64' y='584' width='304' height='176' rx='8' ry='8' style='stroke:none'/>
<path d='M 64 612 L 64 592 Q 64 584 72 584 L 360 584 Q 368 584 368 592 L 368 612 L64 612 ' style='fill:url(#tbg_B3801A);stroke:1;stroke-opacity:0.1;' />
<rect class='entity' x='64' y='584' width='304' height='176' rx='8' ry='8' style='fill:none;stroke:#B3801A'/>
<a xlink:href='#dm_hadr_availability_group_states'><text x='104' y='604'>sys.dm_hadr_availability_group_states</text><title>Table sys.dm_hadr_availability_group_states
Returns a row for each Always On availability group that possesses an availability replica on the local instance of SQL Server. Each row displays the states that define the health of a given availability group.</title></a>
  <use id='nn' x='66' y='621' xlink:href='#nn'/><a xlink:href='#dm_hadr_availability_group_states.group_id'><text id='sys.dm_hadr_availability_group_states.group_id' x='83' y='631' onmouseover="hghl(['dm_hadr_availability_group_states_Fk_dm_hadr_availability_group_states_availability_groups','sys.availability_groups.group_id'])" onmouseout="uhghl(['dm_hadr_availability_group_states_Fk_dm_hadr_availability_group_states_availability_groups','sys.availability_groups.group_id'])">group_id</text><text x='352' y='632' text-anchor='end' class='colType'>uniqueidentifier</text><title>group_id
* uniqueidentifier
Unique identifier of the availability group.</title></a>
<a xlink:href='#dm_hadr_availability_group_states.group_id'><use id='fk' x='356' y='620' xlink:href='#fk'/><title>References availability_groups ( group_id ) </title></a>
  <a xlink:href='#dm_hadr_availability_group_states.primary_replica'><use id='null' x='352' y='636' xlink:href='#flag2'/></a>
<a xlink:href='#dm_hadr_availability_group_states.primary_replica'><text id='sys.dm_hadr_availability_group_states.primary_replica' x='83' y='647'>primary_replica</text><text x='352' y='648' text-anchor='end' class='colType'>nvarchar(128)</text><title>primary_replica
nvarchar(128)
Name of the server instance that is hosting the current primary replica.

NULL = Not the primary replica or unable to communicate with the WSFC failover cluster.</title></a>
  <a xlink:href='#dm_hadr_availability_group_states.primary_recovery_health'><text id='sys.dm_hadr_availability_group_states.primary_recovery_health' x='83' y='663'>primary_recovery_health</text><text x='352' y='664' text-anchor='end' class='colType'>tinyint</text><title>primary_recovery_health
tinyint
Indicates the recovery health of the primary replica, one of:

0 = In progress

1 = Online

NULL

On secondary replicas the primary_recovery_health column is NULL.</title></a>
  <a xlink:href='#dm_hadr_availability_group_states.primary_recovery_health_desc'><text id='sys.dm_hadr_availability_group_states.primary_recovery_health_desc' x='83' y='679'>primary_recovery_health_desc</text><text x='352' y='680' text-anchor='end' class='colType'>nvarchar(60)</text><title>primary_recovery_health_desc
nvarchar(60)
Description of primary_replica_health, one of:

ONLINE_IN_PROGRESS

ONLINE

NULL</title></a>
  <a xlink:href='#dm_hadr_availability_group_states.secondary_recovery_health'><text id='sys.dm_hadr_availability_group_states.secondary_recovery_health' x='83' y='695'>secondary_recovery_health</text><text x='352' y='696' text-anchor='end' class='colType'>tinyint</text><title>secondary_recovery_health
tinyint
Indicates the recovery health of a secondary replica replica,one of:

0 = In progress

1 = Online

NULL

On the primary replica, the secondary_recovery_health column is NULL.</title></a>
  <a xlink:href='#dm_hadr_availability_group_states.secondary_recovery_health_desc'><text id='sys.dm_hadr_availability_group_states.secondary_recovery_health_desc' x='83' y='711'>secondary_recovery_health_desc</text><text x='352' y='712' text-anchor='end' class='colType'>nvarchar(60)</text><title>secondary_recovery_health_desc
nvarchar(60)
Description of secondary_recovery_health, one of:

ONLINE_IN_PROGRESS

ONLINE

NULL</title></a>
  <a xlink:href='#dm_hadr_availability_group_states.synchronization_health'><use id='null' x='352' y='716' xlink:href='#flag2'/></a>
<a xlink:href='#dm_hadr_availability_group_states.synchronization_health'><text id='sys.dm_hadr_availability_group_states.synchronization_health' x='83' y='727'>synchronization_health</text><text x='352' y='728' text-anchor='end' class='colType'>tinyint</text><title>synchronization_health
tinyint
Reflects a rollup of the synchronization_health of all availability replicas in the availability group. Below are the possible values and their descriptions.

0: Not healthy. None of the availability replicas have a healthy synchronization_health (2 = HEALTHY).

1: Partially healthy. The synchronization health of some, but not all, availability replicas is healthy.

2: Healthy. The synchronization health of every availability replica is healthy.

For information about replica synchronization health, see the synchronization_health column in sys.dm_hadr_availability_replica_states (Transact-SQL).</title></a>
  <a xlink:href='#dm_hadr_availability_group_states.synchronization_health_desc'><text id='sys.dm_hadr_availability_group_states.synchronization_health_desc' x='83' y='743'>synchronization_health_desc</text><text x='352' y='744' text-anchor='end' class='colType'>nvarchar(60)</text><title>synchronization_health_desc
nvarchar(60)
Description of synchronization_health, one of:

NOT_HEALTHY

PARTIALLY_HEALTHY

HEALTHY</title></a>

<!-- == Table 'availability_replicas' == -->
<rect class='entity' x='896' y='328' width='336' height='384' rx='8' ry='8' style='stroke:none'/>
<path d='M 896 356 L 896 336 Q 896 328 904 328 L 1224 328 Q 1232 328 1232 336 L 1232 356 L896 356 ' style='fill:url(#tbg_3986C1);stroke:1;stroke-opacity:0.1;' />
<rect class='entity' x='896' y='328' width='336' height='384' rx='8' ry='8' style='fill:none;stroke:#3986C1'/>
<a xlink:href='#availability_replicas'><text x='994' y='348'>sys.availability_replicas</text><title>Table sys.availability_replicas
Returns a row for each of the availability replicas that belong to any Always On availability group in the WSFC failover cluster.

If the local server instance is unable to talk to the WSFC failover cluster, for example because the cluster is down or quorum has been lost, only rows for local availability replicas are returned. These rows will contain only the columns of data that are cached locally in metadata.</title></a>
  <a xlink:href='#availability_replicas.replica_id'><text id='sys.availability_replicas.replica_id' x='915' y='375' onmouseover="hghl(['dm_hadr_availability_replica_cluster_states_Fk_dm_hadr_availability_replica_cluster_states_availability_replicas','sys.dm_hadr_availability_replica_cluster_states.replica_id','dm_hadr_availability_replica_states_Fk_dm_hadr_availability_replica_states_availability_replicas','sys.dm_hadr_availability_replica_states.replica_id','dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_replicas','sys.dm_hadr_database_replica_cluster_states.replica_id','dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_replicas','sys.dm_hadr_database_replica_states.replica_id'])" onmouseout="uhghl(['dm_hadr_availability_replica_cluster_states_Fk_dm_hadr_availability_replica_cluster_states_availability_replicas','sys.dm_hadr_availability_replica_cluster_states.replica_id','dm_hadr_availability_replica_states_Fk_dm_hadr_availability_replica_states_availability_replicas','sys.dm_hadr_availability_replica_states.replica_id','dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_replicas','sys.dm_hadr_database_replica_cluster_states.replica_id','dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_replicas','sys.dm_hadr_database_replica_states.replica_id'])">replica_id</text><text x='1216' y='376' text-anchor='end' class='colType'>uniqueidentifier</text><title>replica_id
uniqueidentifier
Unique ID of the replica.</title></a>
<a xlink:href='#availability_replicas.replica_id'><use id='ref' x='1220' y='364' xlink:href='#ref'/><title>Referred by dm_hadr_availability_replica_cluster_states ( replica_id ) 
Referred by dm_hadr_availability_replica_states ( replica_id ) 
Referred by dm_hadr_database_replica_cluster_states ( replica_id ) 
Referred by dm_hadr_database_replica_states ( replica_id ) </title></a>
  <use id='nn' x='898' y='381' xlink:href='#nn'/><a xlink:href='#availability_replicas.group_id'><text id='sys.availability_replicas.group_id' x='915' y='391' onmouseover="hghl(['availability_replicas_Fk_availability_replicas_availability_groups','sys.availability_groups.group_id'])" onmouseout="uhghl(['availability_replicas_Fk_availability_replicas_availability_groups','sys.availability_groups.group_id'])">group_id</text><text x='1216' y='392' text-anchor='end' class='colType'>uniqueidentifier</text><title>group_id
* uniqueidentifier
Unique ID of the availability group to which the replica belongs.</title></a>
<a xlink:href='#availability_replicas.group_id'><use id='fk' x='1220' y='380' xlink:href='#fk'/><title>References availability_groups ( group_id ) </title></a>
  <a xlink:href='#availability_replicas.replica_metadata_id'><text id='sys.availability_replicas.replica_metadata_id' x='915' y='407'>replica_metadata_id</text><text x='1216' y='408' text-anchor='end' class='colType'>int</text><title>replica_metadata_id
int
ID for the local metadata object for availability replicas in the Database Engine.</title></a>
  <a xlink:href='#availability_replicas.replica_server_name'><use id='null' x='1216' y='412' xlink:href='#flag2'/></a>
<a xlink:href='#availability_replicas.replica_server_name'><text id='sys.availability_replicas.replica_server_name' x='915' y='423'>replica_server_name</text><text x='1216' y='424' text-anchor='end' class='colType'>nvarchar(256)</text><title>replica_server_name
nvarchar(256)
Server name of the instance of SQL Server that is hosting this replica and, for a non-default instance, its instance name.</title></a>
  <a xlink:href='#availability_replicas.owner_sid'><text id='sys.availability_replicas.owner_sid' x='915' y='439'>owner_sid</text><text x='1216' y='440' text-anchor='end' class='colType'>varbinary(85)</text><title>owner_sid
varbinary(85)
Security identifier (SID) registered to this server instance for the external owner of this availability replica.

NULL for non-local availability replicas.</title></a>
  <a xlink:href='#availability_replicas.endpoint_url'><text id='sys.availability_replicas.endpoint_url' x='915' y='455'>endpoint_url</text><text x='1216' y='456' text-anchor='end' class='colType'>nvarchar(256)</text><title>endpoint_url
nvarchar(256)
String representation of the user-specified database mirroring endpoint that is used by connections between primary and secondary replicas for data synchronization. For information about the syntax of endpoint URLs, see Specify the Endpoint URL When Adding or Modifying an Availability Replica (SQL Server).

NULL = Unable to talk to the WSFC failover cluster.

To change this endpoint, use the ENDPOINT_URL option of ALTER AVAILABILITY GROUP Transact-SQL statement.</title></a>
  <a xlink:href='#availability_replicas.availability_mode'><use id='null' x='1216' y='460' xlink:href='#flag2'/></a>
<a xlink:href='#availability_replicas.availability_mode'><text id='sys.availability_replicas.availability_mode' x='915' y='471'>availability_mode</text><text x='1216' y='472' text-anchor='end' class='colType'>tinyint</text><title>availability_mode
tinyint
The availability mode of the replica, one of:

0 | Asynchronous commit. The primary replica can commit transactions without waiting for the secondary to write the log to disk.

1 | Synchronous commit. The primary replica waits to commit a given transaction until the secondary replica has written the transaction to disk.

4 | Configuration only. The primary replica sends availability group configuration metadata to the replica synchronously. User data is not transmitted to the replica. Available in SQL Server 2017 CU1 and later.

For more information, see Availability Modes (Always On Availability Groups).</title></a>
  <a xlink:href='#availability_replicas.availability_mode_desc'><text id='sys.availability_replicas.availability_mode_desc' x='915' y='487'>availability_mode_desc</text><text x='1216' y='488' text-anchor='end' class='colType'>nvarchar(60)</text><title>availability_mode_desc
nvarchar(60)
Description of availability_mode, one of:

ASYNCHRONOUS_COMMIT

SYNCHRONOUS_COMMIT

CONFIGURATION_ONLY

To change this the availability mode of an availability replica, use the AVAILABILITY_MODE option of ALTER AVAILABILITY GROUP Transact-SQL statement.

You cannot change the availability mode of a replica to CONFIGURATION_ONLY. You cannot change a CONFIGURATION_ONLY replica to a secondary or primary replica.</title></a>
  <a xlink:href='#availability_replicas.failover_mode'><text id='sys.availability_replicas.failover_mode' x='915' y='503'>failover_mode</text><text x='1216' y='504' text-anchor='end' class='colType'>tinyint</text><title>failover_mode
tinyint
The failover mode of the availability replica, one of:

0 | Manual failover. A failover to a secondary replica set to manual failover must be manually initiated by the database administrator. The type of failover that is performed will depend on whether the secondary replica is synchronized, as follows:

If the availability replica is not synchronizing or is still synchronizing, only forced failover (with possible data loss) can occur.

If the availability mode is set to synchronous commit (availability_mode = 1) and the availability replica is currently synchronized, manual failover without data loss can occur.

1 | Automatic failover. The replica is a potential target for automatic failovers. Automatic failover is supported only if the availability mode is set to synchronous commit (availability_mode = 1) and the availability replica is currently synchronized.

To view a rollup of the database synchronization health of every availability database in an availability replica, use the synchronization_health and synchronization_health_desc columns of the sys.dm_hadr_availability_replica_states dynamic management view. The rollup considers the synchronization state of every availability database and the availability mode of its availability replica.

Note: To view the synchronization health of a given availability database, query the synchronization_state and synchronization_health columns of the sys.dm_hadr_database_replica_states dynamic management view.</title></a>
  <a xlink:href='#availability_replicas.failover_mode_desc'><text id='sys.availability_replicas.failover_mode_desc' x='915' y='519'>failover_mode_desc</text><text x='1216' y='520' text-anchor='end' class='colType'>nvarchar(60)</text><title>failover_mode_desc
nvarchar(60)
Description of failover_mode, one of:

MANUAL

AUTOMATIC

To change the failover mode, use the FAILOVER_MODE option of ALTER AVAILABILITY GROUP Transact-SQL statement.</title></a>
  <a xlink:href='#availability_replicas.session_timeout'><text id='sys.availability_replicas.session_timeout' x='915' y='535'>session_timeout</text><text x='1216' y='536' text-anchor='end' class='colType'>int</text><title>session_timeout
int
The time-out period, in seconds. The time-out period is the maximum time that the replica waits to receive a message from another replica before considering connection between the primary and secondary replica have failed. Session timeout detects whether secondaries are connected the primary replica.

On detecting a failed connection with a secondary replica, the primary replica considers the secondary replica to be NOT_SYNCHRONIZED. On detecting a failed connection with the primary replica, a secondary replica simply attempts to reconnect.

Note: Session timeouts do not cause automatic failovers.

To change this value, use the SESSION_TIMEOUT option of ALTER AVAILABILITY GROUP Transact-SQL statement.</title></a>
  <a xlink:href='#availability_replicas.primary_role_allow_connections'><text id='sys.availability_replicas.primary_role_allow_connections' x='915' y='551'>primary_role_allow_connections</text><text x='1216' y='552' text-anchor='end' class='colType'>tinyint</text><title>primary_role_allow_connections
tinyint
Whether the availability allows all connections or only read-write connections, one of:

2 = All (default)

3 = Read write</title></a>
  <a xlink:href='#availability_replicas.primary_role_allow_connections_desc'><text id='sys.availability_replicas.primary_role_allow_connections_desc' x='915' y='567'>primary_role_allow_connections_desc</text><text x='1216' y='568' text-anchor='end' class='colType'>nvarchar(60)</text><title>primary_role_allow_connections_desc
nvarchar(60)
Description of primary_role_allow_connections, one of:

ALL

READ_WRITE</title></a>
  <a xlink:href='#availability_replicas.secondary_role_allow_connections'><text id='sys.availability_replicas.secondary_role_allow_connections' x='915' y='583'>secondary_role_allow_connections</text><text x='1216' y='584' text-anchor='end' class='colType'>tinyint</text><title>secondary_role_allow_connections
tinyint
Whether an availability replica that is performing the secondary role (that is, a secondary replica) can accept connections from clients, one of:

0 = No. No connections are allowed to the databases in the secondary replica, and the databases are not available for read access. This is the default setting.

1 = Read only. Only read-only connections are allowed to the databases in the secondary replica. All database(s) in the replica are available for read access.

2 = All. All connections are allowed to the databases in the secondary replica for read-only access.

For more information, see Active Secondaries: Readable Secondary Replicas (Always On Availability Groups).</title></a>
  <a xlink:href='#availability_replicas.secondary_role_allow_connections_desc'><text id='sys.availability_replicas.secondary_role_allow_connections_desc' x='915' y='599'>secondary_role_allow_connections_desc</text><text x='1216' y='600' text-anchor='end' class='colType'>nvarchar(60)</text><title>secondary_role_allow_connections_desc
nvarchar(60)
Description of secondary_role_allow_connections, one of:

NO

READ_ONLY

ALL</title></a>
  <a xlink:href='#availability_replicas.create_date'><text id='sys.availability_replicas.create_date' x='915' y='615'>create_date</text><text x='1216' y='616' text-anchor='end' class='colType'>datetime</text><title>create_date
datetime
Date that the replica was created.

NULL = Replica not on this server instance.</title></a>
  <a xlink:href='#availability_replicas.modify_date'><text id='sys.availability_replicas.modify_date' x='915' y='631'>modify_date</text><text x='1216' y='632' text-anchor='end' class='colType'>datetime</text><title>modify_date
datetime
Date that the replica was last modified.

NULL = Replica not on this server instance.</title></a>
  <a xlink:href='#availability_replicas.backup_priority'><text id='sys.availability_replicas.backup_priority' x='915' y='647'>backup_priority</text><text x='1216' y='648' text-anchor='end' class='colType'>int</text><title>backup_priority
int
Represents the user-specified priority for performing backups on this replica relative to the other replicas in the same availability group. The value is an integer in the range of 0..100.

For more information, see Active Secondaries: Backup on Secondary Replicas (Always On Availability Groups).</title></a>
  <a xlink:href='#availability_replicas.read_only_routing_url'><text id='sys.availability_replicas.read_only_routing_url' x='915' y='663'>read_only_routing_url</text><text x='1216' y='664' text-anchor='end' class='colType'>nvarchar(256)</text><title>read_only_routing_url
nvarchar(256)
Connectivity endpoint (URL) of the read only availability replica. For more information, see Configure Read-Only Routing for an Availability Group (SQL Server).</title></a>
  <a xlink:href='#availability_replicas.seeding_mode'><text id='sys.availability_replicas.seeding_mode' x='915' y='679'>seeding_mode</text><text x='1216' y='680' text-anchor='end' class='colType'>tinyint</text><title>seeding_mode
tinyint</title></a>
  <a xlink:href='#availability_replicas.seeding_mode_desc'><text id='sys.availability_replicas.seeding_mode_desc' x='915' y='695'>seeding_mode_desc</text><text x='1216' y='696' text-anchor='end' class='colType'>nvarchar(60)</text><title>seeding_mode_desc
nvarchar(60)</title></a>

<!-- == Table 'dm_hadr_database_replica_cluster_states' == -->
<rect class='entity' x='960' y='936' width='272' height='176' rx='8' ry='8' style='stroke:none'/>
<path d='M 960 964 L 960 944 Q 960 936 968 936 L 1224 936 Q 1232 936 1232 944 L 1232 964 L960 964 ' style='fill:url(#tbg_B3801A);stroke:1;stroke-opacity:0.1;' />
<rect class='entity' x='960' y='936' width='272' height='176' rx='8' ry='8' style='fill:none;stroke:#B3801A'/>
<a xlink:href='#dm_hadr_database_replica_cluster_states'><text x='964' y='956'>sys.dm_hadr_database_replica_cluster_states</text><title>Table sys.dm_hadr_database_replica_cluster_states
Returns a row containing information intended to provide you with insight into the health of the availability databases in the Always On availability groups in each Always On availability group on the Windows Server Failover Clustering (WSFC) cluster. Query sys.dm_hadr_database_replica_states to answer the following questions:
* Are all databases in an availability group ready for a failover?
* After a forced failover, has a secondary database suspended itself locally and acknowledged its suspended state to the new primary replica?
* If the primary replica is currently unavailable, which secondary replica would allow the minimum data loss if it becomes the primary replica?
* When the value of the sys.databases log_reuse_wait_desc column is "AVAILABILITY_REPLICA", which secondary replica in an availability group is holding up log truncation on a given primary database?</title></a>
  <use id='nn' x='962' y='973' xlink:href='#nn'/><a xlink:href='#dm_hadr_database_replica_cluster_states.replica_id'><text id='sys.dm_hadr_database_replica_cluster_states.replica_id' x='979' y='983' onmouseover="hghl(['dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_replicas','sys.availability_replicas.replica_id'])" onmouseout="uhghl(['dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_replicas','sys.availability_replicas.replica_id'])">replica_id</text><text x='1216' y='984' text-anchor='end' class='colType'>uniqueidentifier</text><title>replica_id
* uniqueidentifier
Identifier of the availability replica within the availability group.</title></a>
<a xlink:href='#dm_hadr_database_replica_cluster_states.replica_id'><use id='fk' x='1220' y='972' xlink:href='#fk'/><title>References availability_replicas ( replica_id ) </title></a>
  <use id='nn' x='962' y='989' xlink:href='#nn'/><a xlink:href='#dm_hadr_database_replica_cluster_states.group_database_id'><text id='sys.dm_hadr_database_replica_cluster_states.group_database_id' x='979' y='999' onmouseover="hghl(['dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_databases_cluster','sys.availability_databases_cluster.group_database_id'])" onmouseout="uhghl(['dm_hadr_database_replica_cluster_states_Fk_dm_hadr_database_replica_cluster_states_availability_databases_cluster','sys.availability_databases_cluster.group_database_id'])">group_database_id</text><text x='1216' y='1000' text-anchor='end' class='colType'>uniqueidentifier</text><title>group_database_id
* uniqueidentifier
Identifier of the database within the availability group. This identifier is identical on every replica to which this database is joined.</title></a>
<a xlink:href='#dm_hadr_database_replica_cluster_states.group_database_id'><use id='fk' x='1220' y='988' xlink:href='#fk'/><title>References availability_databases_cluster ( group_database_id ) </title></a>
  <a xlink:href='#dm_hadr_database_replica_cluster_states.database_name'><text id='sys.dm_hadr_database_replica_cluster_states.database_name' x='979' y='1015'>database_name</text><text x='1216' y='1016' text-anchor='end' class='colType'>nvarchar(128)</text><title>database_name
nvarchar(128)
Name of a database that belongs to the availability group.</title></a>
  <use id='nn' x='962' y='1021' xlink:href='#nn'/><a xlink:href='#dm_hadr_database_replica_cluster_states.is_failover_ready'><text id='sys.dm_hadr_database_replica_cluster_states.is_failover_ready' x='979' y='1031'>is_failover_ready</text><text x='1216' y='1032' text-anchor='end' class='colType'>bit</text><title>is_failover_ready
* bit
Indicates whether the secondary database is synchronized with the corresponding primary database. one of:

0 = The database is not marked as synchronized in the cluster. The database is not ready for a failover.

1 = The database is marked as synchronized in the cluster. The database is ready for a failover.</title></a>
  <use id='nn' x='962' y='1037' xlink:href='#nn'/><a xlink:href='#dm_hadr_database_replica_cluster_states.is_pending_secondary_suspend'><text id='sys.dm_hadr_database_replica_cluster_states.is_pending_secondary_suspend' x='979' y='1047'>is_pending_secondary_suspend</text><text x='1216' y='1048' text-anchor='end' class='colType'>bit</text><title>is_pending_secondary_suspend
* bit
Indicates whether, after a forced failover, the database is pending suspension, one of:

0 = Any states except for HADR_SYNCHRONIZED_ SUSPENDED.

1 = HADR_SYNCHRONIZED_ SUSPENDED. When a forced failover completes, each of the secondary databases is set to HADR_SYNCHONIZED_SUSPENDED and remains in this state until the new primary replica receives an acknowledgement from that secondary database to the SUSPEND message.

NULL = Unknown (no quorum)</title></a>
  <use id='nn' x='962' y='1053' xlink:href='#nn'/><a xlink:href='#dm_hadr_database_replica_cluster_states.is_database_joined'><use id='null' x='1216' y='1052' xlink:href='#flag2'/></a>
<a xlink:href='#dm_hadr_database_replica_cluster_states.is_database_joined'><text id='sys.dm_hadr_database_replica_cluster_states.is_database_joined' x='979' y='1063'>is_database_joined</text><text x='1216' y='1064' text-anchor='end' class='colType'>bit</text><title>is_database_joined
* bit
Indicates whether the database on this availability replica has been joined to the availability group, one of:

0 = Database is not joined to the availability group on this availability replica.

1 = Database is joined to the availability group on this availability replica.

NULL = unknown (The availability replica lacks quorum.)</title></a>
  <a xlink:href='#dm_hadr_database_replica_cluster_states.recovery_lsn'><text id='sys.dm_hadr_database_replica_cluster_states.recovery_lsn' x='979' y='1079'>recovery_lsn</text><text x='1216' y='1080' text-anchor='end' class='colType'>numeric(25,0)</text><title>recovery_lsn
numeric(25,0)
On the primary replica, the end of the transaction log before the replica writes any new log records after recovery or failover. On the primary replica, the row for a given secondary database will have the value to which the primary replica needs the secondary replica to synchronize to (that is, to revert to and reinitialize to).

On secondary replicas this value is NULL. Note that each secondary replica will have either the MAX value or a lower value that the primary replica has told the secondary replica to go back to.</title></a>
  <a xlink:href='#dm_hadr_database_replica_cluster_states.truncation_lsn'><text id='sys.dm_hadr_database_replica_cluster_states.truncation_lsn' x='979' y='1095'>truncation_lsn</text><text x='1216' y='1096' text-anchor='end' class='colType'>numeric(25,0)</text><title>truncation_lsn
numeric(25,0)
The Always On availability groups log truncation value, which may be higher than the local truncation LSN if local log truncation is blocked (such as by a backup operation).</title></a>

<!-- == Table 'dm_hadr_database_replica_states' == -->
<rect class='entity' x='1392' y='936' width='272' height='624' rx='8' ry='8' style='stroke:none'/>
<path d='M 1392 964 L 1392 944 Q 1392 936 1400 936 L 1656 936 Q 1664 936 1664 944 L 1664 964 L1392 964 ' style='fill:url(#tbg_B3801A);stroke:1;stroke-opacity:0.1;' />
<rect class='entity' x='1392' y='936' width='272' height='624' rx='8' ry='8' style='fill:none;stroke:#B3801A'/>
<a xlink:href='#dm_hadr_database_replica_states'><text x='1418' y='956'>sys.dm_hadr_database_replica_states</text><title>Table sys.dm_hadr_database_replica_states
Returns a row for each database that is participating in an Always On availability group for which the local instance of SQL Server is hosting an availability replica. This dynamic management view exposes state information on both the primary and secondary replicas. On a secondary replica, this view returns a row for every secondary database on the server instance. On the primary replica, this view returns a row for each primary database and an additional row for the corresponding secondary database.

!IMPORTANT
Depending on the action and higher-level states, database-state information may be unavailable or out of date. Furthermore, the values have only local relevance. For example, on the primary replica, the value of the last_hardened_lsn column reflects the information about a given secondary database that is currently available to the primary replica, not the actual hardened LSN value that the secondary replica might have currently.</title></a>
  <use id='nn' x='1394' y='973' xlink:href='#nn'/><a xlink:href='#dm_hadr_database_replica_states.database_id'><use id='idx' x='1394' y='972' xlink:href='#idx'/><title>Idx_dm_hadr_database_replica_states_database_id ( database_id ) </title></a>
<a xlink:href='#dm_hadr_database_replica_states.database_id'><text id='sys.dm_hadr_database_replica_states.database_id' x='1411' y='983' onmouseover="hghl(['dm_hadr_database_replica_states_fk_dm_hadr_database_replica_states','sys.databases.database_id'])" onmouseout="uhghl(['dm_hadr_database_replica_states_fk_dm_hadr_database_replica_states','sys.databases.database_id'])">database_id</text><text x='1648' y='984' text-anchor='end' class='colType'>int</text><title>database_id
* int
Identifier of the database, unique within an instance of SQL Server. This is the same value as displayed in the sys.databases catalog view.</title></a>
<a xlink:href='#dm_hadr_database_replica_states.database_id'><use id='fk' x='1652' y='972' xlink:href='#fk'/><title>References databases ( database_id ) </title></a>
  <use id='nn' x='1394' y='989' xlink:href='#nn'/><a xlink:href='#dm_hadr_database_replica_states.group_id'><text id='sys.dm_hadr_database_replica_states.group_id' x='1411' y='999'>group_id</text><text x='1648' y='1000' text-anchor='end' class='colType'>uniqueidentifier</text><title>group_id
* uniqueidentifier
Identifier of the availability group to which the database belongs.</title></a>
  <use id='nn' x='1394' y='1005' xlink:href='#nn'/><a xlink:href='#dm_hadr_database_replica_states.replica_id'><text id='sys.dm_hadr_database_replica_states.replica_id' x='1411' y='1015' onmouseover="hghl(['dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_replicas','sys.availability_replicas.replica_id'])" onmouseout="uhghl(['dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_replicas','sys.availability_replicas.replica_id'])">replica_id</text><text x='1648' y='1016' text-anchor='end' class='colType'>uniqueidentifier</text><title>replica_id
* uniqueidentifier
Identifier of the availability replica within the availability group.</title></a>
<a xlink:href='#dm_hadr_database_replica_states.replica_id'><use id='fk' x='1652' y='1004' xlink:href='#fk'/><title>References availability_replicas ( replica_id ) </title></a>
  <use id='nn' x='1394' y='1021' xlink:href='#nn'/><a xlink:href='#dm_hadr_database_replica_states.group_database_id'><text id='sys.dm_hadr_database_replica_states.group_database_id' x='1411' y='1031' onmouseover="hghl(['dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_databases_cluster','sys.availability_databases_cluster.group_database_id'])" onmouseout="uhghl(['dm_hadr_database_replica_states_Fk_dm_hadr_database_replica_states_availability_databases_cluster','sys.availability_databases_cluster.group_database_id'])">group_database_id</text><text x='1648' y='1032' text-anchor='end' class='colType'>uniqueidentifier</text><title>group_database_id
* uniqueidentifier
Identifier of the database within the availability group. This identifier is identical on every replica to which this database is joined.</title></a>
<a xlink:href='#dm_hadr_database_replica_states.group_database_id'><use id='fk' x='1652' y='1020' xlink:href='#fk'/><title>References availability_databases_cluster ( group_database_id ) </title></a>
  <a xlink:href='#dm_hadr_database_replica_states.is_local'><text id='sys.dm_hadr_database_replica_states.is_local' x='1411' y='1047'>is_local</text><text x='1648' y='1048' text-anchor='end' class='colType'>bit</text><title>is_local
bit
Whether the availability database is local, one of:

0 = The database is not local to the SQL Server instance.

1 = The database is local to the server instance.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.is_primary_replica'><text id='sys.dm_hadr_database_replica_states.is_primary_replica' x='1411' y='1063'>is_primary_replica</text><text x='1648' y='1064' text-anchor='end' class='colType'>bit</text><title>is_primary_replica
bit
Returns 1 if the replica is primary, or 0 if it is a secondary replica.

Applies to: SQL Server 2014 (12.x) through SQL Server 2017.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.synchronization_state'><use id='null' x='1648' y='1068' xlink:href='#flag2'/></a>
<a xlink:href='#dm_hadr_database_replica_states.synchronization_state'><text id='sys.dm_hadr_database_replica_states.synchronization_state' x='1411' y='1079'>synchronization_state</text><text x='1648' y='1080' text-anchor='end' class='colType'>tinyint</text><title>synchronization_state
tinyint
Data-movement state, one of the following values.

0 = Not synchronizing. For a primary database, indicates that the database is not ready to synchronize its transaction log with the corresponding secondary databases. For a secondary database, indicates that the database has not started log synchronization because of a connection issue, is being suspended, or is going through transition states during startup or a role switch.

1 = Synchronizing. For a primary database, indicates that the database is ready to accept a scan request from a secondary database. For a secondary database, indicates that active data movement is occurring for the database.

2 = Synchronized. A primary database shows SYNCHRONIZED in place of SYNCHRONIZING. A synchronous-commit secondary database shows synchronized when the local cache says the database is failover ready and is synchronizing.

3 = Reverting. Indicates the phase in the undo process when a secondary database is actively getting pages from the primary database.
Caution: When a database on a secondary replica is in the REVERTING state, forcing failover to the secondary replica leaves the database in a state in which it cannot be started as a primary database. Either the database will need to reconnect as a secondary database, or you will need to apply new log records from a log backup.

4 = Initializing. Indicates the phase of undo when the transaction log required for a secondary database to catch up to the undo LSN is being shipped and hardened on a secondary replica.
Caution: When a database on a secondary replica is in the INITIALIZING state, forcing failover to the secondary replica leaves the database in a state in which it be started as a primary database. Either the database will need to reconnect as a secondary database, or you will need to apply new log records from a log backup.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.synchronization_state_desc'><text id='sys.dm_hadr_database_replica_states.synchronization_state_desc' x='1411' y='1095'>synchronization_state_desc</text><text x='1648' y='1096' text-anchor='end' class='colType'>nvarchar(60)</text><title>synchronization_state_desc
nvarchar(60)
Description of the data-movement state, one of:

NOT SYNCHRONIZING

SYNCHRONIZING

SYNCHRONIZED

REVERTING

INITIALIZING</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.is_commit_participant'><text id='sys.dm_hadr_database_replica_states.is_commit_participant' x='1411' y='1111'>is_commit_participant</text><text x='1648' y='1112' text-anchor='end' class='colType'>bit</text><title>is_commit_participant
bit
0 = Transaction commit is not synchronized with respect to this database.

1 = Transaction commit is synchronized with respect to this database.

For a database on an asynchronous-commit availability replica, this value is always 0.

For a database on a synchronous-commit availability replica, this value is accurate only on the primary database.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.synchronization_health'><use id='null' x='1648' y='1116' xlink:href='#flag2'/></a>
<a xlink:href='#dm_hadr_database_replica_states.synchronization_health'><text id='sys.dm_hadr_database_replica_states.synchronization_health' x='1411' y='1127'>synchronization_health</text><text x='1648' y='1128' text-anchor='end' class='colType'>tinyint</text><title>synchronization_health
tinyint
Reflects the intersection of the synchronization state of a database that is joined to the availability group on the availability replica and the availability mode of the availability replica (synchronous-commit or asynchronous-commit mode), one of the following values.

0 = Not healthy. The synchronization_state of the database is 0 (NOT SYNCHRONIZING).

1 = Partially healthy. A database on a synchronous-commit availability replica is considered partially healthy if synchronization_state is 1 (SYNCHRONIZING).

2 = Healthy. A database on an synchronous-commit availability replica is considered healthy if synchronization_state is 2 (SYNCHRONIZED), and a database on an asynchronous-commit availability replica is considered healthy if synchronization_state is 1 (SYNCHRONIZING).</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.synchronization_health_desc'><text id='sys.dm_hadr_database_replica_states.synchronization_health_desc' x='1411' y='1143'>synchronization_health_desc</text><text x='1648' y='1144' text-anchor='end' class='colType'>nvarchar(60)</text><title>synchronization_health_desc
nvarchar(60)
Description of the synchronization_health of the availability database.

NOT_HEALTHY

PARTIALLY_HEALTHY

HEALTHY</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.database_state'><text id='sys.dm_hadr_database_replica_states.database_state' x='1411' y='1159'>database_state</text><text x='1648' y='1160' text-anchor='end' class='colType'>tinyint</text><title>database_state
tinyint
0 = Online

1 = Restoring

2 = Recovering

3 = Recovery pending

4 = Suspect

5 = Emergency

6 = Offline

Note: Same as state column in sys.databases.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.database_state_desc'><text id='sys.dm_hadr_database_replica_states.database_state_desc' x='1411' y='1175'>database_state_desc</text><text x='1648' y='1176' text-anchor='end' class='colType'>nvarchar(60)</text><title>database_state_desc
nvarchar(60)
Description of the database_state of the availability replica.

ONLINE

RESTORING

RECOVERING

RECOVERY_PENDING

SUSPECT

EMERGENCY

OFFLINE

Note: Same as state_desc column in sys.databases.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.is_suspended'><use id='null' x='1648' y='1180' xlink:href='#flag2'/></a>
<a xlink:href='#dm_hadr_database_replica_states.is_suspended'><text id='sys.dm_hadr_database_replica_states.is_suspended' x='1411' y='1191'>is_suspended</text><text x='1648' y='1192' text-anchor='end' class='colType'>bit</text><title>is_suspended
bit
Database state, one of:

0 = Resumed

1 = Suspended</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.suspend_reason'><text id='sys.dm_hadr_database_replica_states.suspend_reason' x='1411' y='1207'>suspend_reason</text><text x='1648' y='1208' text-anchor='end' class='colType'>tinyint</text><title>suspend_reason
tinyint
If the database is suspended, the reason for the suspended state, one of:

0 = User action

1 = Suspend from partner

2 = Redo

3 = Capture

4 = Apply

5 = Restart

6 = Undo

7 = Revalidation

8 = Error in the calculation of the secondary-replica synchronization point</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.suspend_reason_desc'><text id='sys.dm_hadr_database_replica_states.suspend_reason_desc' x='1411' y='1223'>suspend_reason_desc</text><text x='1648' y='1224' text-anchor='end' class='colType'>nvarchar(60)</text><title>suspend_reason_desc
nvarchar(60)
Description of the database suspended state reason, one of:

SUSPEND_FROM_USER = A user manually suspended data movement

SUSPEND_FROM_PARTNER = The database replica is suspended after a forced failover

SUSPEND_FROM_REDO = An error occurred during the redo phase

SUSPEND_FROM_APPLY = An error occurred when writing the log to file (see error log)

SUSPEND_FROM_CAPTURE = An error occurred while capturing log on the primary replica

SUSPEND_FROM_RESTART = The database replica was suspended before the database was restarted (see error log)

SUSPEND_FROM_UNDO = An error occurred during the undo phase (see error log)

SUSPEND_FROM_REVALIDATION = Log change mismatch is detected on reconnection (see error log)

SUSPEND_FROM_XRF_UPDATE = Unable to find the common log point (see error log)</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.recovery_lsn'><text id='sys.dm_hadr_database_replica_states.recovery_lsn' x='1411' y='1239'>recovery_lsn</text><text x='1648' y='1240' text-anchor='end' class='colType'>numeric(25,0)</text><title>recovery_lsn
numeric(25,0)
On the primary replica, the end of the transaction log before the primary database writes any new log records after recovery or failover. For a given secondary database, if this value is less than the current hardened LSN (last_hardened_lsn), recovery_lsn is the value to which this secondary database would need to resynchronize (that is, to revert to and reinitialize to). If this value is greater than or equal to the current hardened LSN, resynchronization would be unnecessary and would not occur.

recovery_lsn reflects a log-block ID padded with zeroes. It is not an actual log sequence number (LSN). For information about how this value is derived, see Understanding the LSN Column Values, later in this topic.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.truncation_lsn'><text id='sys.dm_hadr_database_replica_states.truncation_lsn' x='1411' y='1255'>truncation_lsn</text><text x='1648' y='1256' text-anchor='end' class='colType'>numeric(25,0)</text><title>truncation_lsn
numeric(25,0)
On the primary replica, for the primary database, reflects the minimum log truncation LSN across all the corresponding secondary databases. If local log truncation is blocked (such as by a backup operation), this LSN might be higher than the local truncation LSN.

For a given secondary database, reflects the truncation point of that database.

truncation_lsn reflects a log-block ID padded with zeroes. It is not an actual log sequence number.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.last_sent_lsn'><text id='sys.dm_hadr_database_replica_states.last_sent_lsn' x='1411' y='1271'>last_sent_lsn</text><text x='1648' y='1272' text-anchor='end' class='colType'>numeric(25,0)</text><title>last_sent_lsn
numeric(25,0)
The log block identifier that indicates the point up to which all log blocks have been sent by the primary. This is the ID of the next log block that will be sent, rather than the ID of the most recently sent log block.

last_sent_lsn reflects a log-block ID padded with zeroes, It is not an actual log sequence number.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.last_sent_time'><text id='sys.dm_hadr_database_replica_states.last_sent_time' x='1411' y='1287'>last_sent_time</text><text x='1648' y='1288' text-anchor='end' class='colType'>datetime</text><title>last_sent_time
datetime
Time when the last log block was sent.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.last_received_lsn'><text id='sys.dm_hadr_database_replica_states.last_received_lsn' x='1411' y='1303'>last_received_lsn</text><text x='1648' y='1304' text-anchor='end' class='colType'>numeric(25,0)</text><title>last_received_lsn
numeric(25,0)
Log block ID identifying the point up to which all log blocks have been received by the secondary replica that hosts this secondary database.

last_received_lsn reflects a log-block ID padded with zeroes. It is not an actual log sequence number.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.last_received_time'><text id='sys.dm_hadr_database_replica_states.last_received_time' x='1411' y='1319'>last_received_time</text><text x='1648' y='1320' text-anchor='end' class='colType'>datetime</text><title>last_received_time
datetime
Time when the log block ID in last message received was read on the secondary replica.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.last_hardened_lsn'><text id='sys.dm_hadr_database_replica_states.last_hardened_lsn' x='1411' y='1335'>last_hardened_lsn</text><text x='1648' y='1336' text-anchor='end' class='colType'>numeric(25,0)</text><title>last_hardened_lsn
numeric(25,0)
Start of the Log Block containing the log records of last hardened LSN on a secondary database.

On an asynchronous-commit primary database or on a synchronous-commit database whose current policy is "delay", the value is NULL. For other synchronous-commit primary databases, last_hardened_lsn indicates the minimum of the hardened LSN across all the secondary databases.

Note: last_hardened_lsn reflects a log-block ID padded with zeroes. It is not an actual log sequence number. For more information, see Understanding the LSN Column Values, later in this topic.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.last_hardened_time'><text id='sys.dm_hadr_database_replica_states.last_hardened_time' x='1411' y='1351'>last_hardened_time</text><text x='1648' y='1352' text-anchor='end' class='colType'>datetime</text><title>last_hardened_time
datetime
On a secondary database, time of the log-block identifier for the last hardened LSN (last_hardened_lsn). On a primary database, reflects the time corresponding to minimum hardened LSN.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.last_redone_lsn'><text id='sys.dm_hadr_database_replica_states.last_redone_lsn' x='1411' y='1367'>last_redone_lsn</text><text x='1648' y='1368' text-anchor='end' class='colType'>numeric(25,0)</text><title>last_redone_lsn
numeric(25,0)
Actual log sequence number of the last log record that was redone on the secondary database. last_redone_lsn is always less than last_hardened_lsn.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.last_redone_time'><text id='sys.dm_hadr_database_replica_states.last_redone_time' x='1411' y='1383'>last_redone_time</text><text x='1648' y='1384' text-anchor='end' class='colType'>datetime</text><title>last_redone_time
datetime
Time when the last log record was redone on the secondary database.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.log_send_queue_size'><use id='null' x='1648' y='1388' xlink:href='#flag2'/></a>
<a xlink:href='#dm_hadr_database_replica_states.log_send_queue_size'><text id='sys.dm_hadr_database_replica_states.log_send_queue_size' x='1411' y='1399'>log_send_queue_size</text><text x='1648' y='1400' text-anchor='end' class='colType'>bigint</text><title>log_send_queue_size
bigint
Amount of log records of the primary database that has not been sent to the secondary databases, in kilobytes (KB).</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.log_send_rate'><use id='null' x='1648' y='1404' xlink:href='#flag2'/></a>
<a xlink:href='#dm_hadr_database_replica_states.log_send_rate'><text id='sys.dm_hadr_database_replica_states.log_send_rate' x='1411' y='1415'>log_send_rate</text><text x='1648' y='1416' text-anchor='end' class='colType'>bigint</text><title>log_send_rate
bigint
Average rate at which primary replica instance sent data during last active period, in kilobytes (KB)/second.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.redo_queue_size'><use id='null' x='1648' y='1420' xlink:href='#flag2'/></a>
<a xlink:href='#dm_hadr_database_replica_states.redo_queue_size'><text id='sys.dm_hadr_database_replica_states.redo_queue_size' x='1411' y='1431'>redo_queue_size</text><text x='1648' y='1432' text-anchor='end' class='colType'>bigint</text><title>redo_queue_size
bigint
Amount of log records in the log files of the secondary replica that has not yet been redone, in kilobytes (KB).</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.redo_rate'><use id='null' x='1648' y='1436' xlink:href='#flag2'/></a>
<a xlink:href='#dm_hadr_database_replica_states.redo_rate'><text id='sys.dm_hadr_database_replica_states.redo_rate' x='1411' y='1447'>redo_rate</text><text x='1648' y='1448' text-anchor='end' class='colType'>bigint</text><title>redo_rate
bigint
Average Rate at which the log records are being redone on a given secondary database, in kilobytes (KB)/second.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.filestream_send_rate'><text id='sys.dm_hadr_database_replica_states.filestream_send_rate' x='1411' y='1463'>filestream_send_rate</text><text x='1648' y='1464' text-anchor='end' class='colType'>bigint</text><title>filestream_send_rate
bigint
The rate at which the FILESTREAM files are shipped to the secondary replica, in kilobytes (KB)/second.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.end_of_log_lsn'><text id='sys.dm_hadr_database_replica_states.end_of_log_lsn' x='1411' y='1479'>end_of_log_lsn</text><text x='1648' y='1480' text-anchor='end' class='colType'>numeric(25,0)</text><title>end_of_log_lsn
numeric(25,0)
Local end of log LSN. Actual LSN corresponding to the last log record in the log cache on the primary and secondary databases. On the primary replica, the secondary rows reflect the end of log LSN from the latest progress messages that the secondary replicas have sent to the primary replica.

end_of_log_lsn reflects a log-block ID padded with zeroes. It is not an actual log sequence number. For more information, see Understanding the LSN Column Values, later in this topic.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.last_commit_lsn'><text id='sys.dm_hadr_database_replica_states.last_commit_lsn' x='1411' y='1495'>last_commit_lsn</text><text x='1648' y='1496' text-anchor='end' class='colType'>numeric(25,0)</text><title>last_commit_lsn
numeric(25,0)
Actual log sequence number corresponding to the last commit record in the transaction log.

On the primary database, this corresponds to the last commit record processed. Rows for secondary databases show the log sequence number that the secondary replica has sent to the primary replica.

On the secondary replica, this is the last commit record that was redone.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.last_commit_time'><text id='sys.dm_hadr_database_replica_states.last_commit_time' x='1411' y='1511'>last_commit_time</text><text x='1648' y='1512' text-anchor='end' class='colType'>datetime</text><title>last_commit_time
datetime
Time corresponding to the last commit record.

On the secondary database, this time is the same as on the primary database.

On the primary replica, each secondary database row displays the time that the secondary replica that hosts that secondary database has reported back to the primary replica. The difference in time between the primary-database row and a given secondary-database row represents approximately the recovery point objective (RPO), assuming that the redo process is caught up and that the progress has been reported back to the primary replica by the secondary replica.</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.low_water_mark_for_ghosts'><text id='sys.dm_hadr_database_replica_states.low_water_mark_for_ghosts' x='1411' y='1527'>low_water_mark_for_ghosts</text><text x='1648' y='1528' text-anchor='end' class='colType'>bigint</text><title>low_water_mark_for_ghosts
bigint
A monotonically increasing number for the database indicating a low water mark used by ghost cleanup on the primary database. If this number is not increasing over time, it implies that ghost cleanup might not happen. To decide which ghost rows to clean up, the primary replica uses the minimum value of this column for this database across all availability replicas (including the primary replica).</title></a>
  <a xlink:href='#dm_hadr_database_replica_states.secondary_lag_seconds'><text id='sys.dm_hadr_database_replica_states.secondary_lag_seconds' x='1411' y='1543'>secondary_lag_seconds</text><text x='1648' y='1544' text-anchor='end' class='colType'>bigint</text><title>secondary_lag_seconds
bigint
The number of seconds that the secondary replica is behind the primary replica during synchronization.

Applies to: SQL Server 2016 (13.x) through SQL Server 2017.</title></a>

<!-- == Table 'availability_group_listeners' == -->
<rect class='entity' x='448' y='88' width='336' height='144' rx='8' ry='8' style='stroke:none'/>
<path d='M 448 116 L 448 96 Q 448 88 456 88 L 776 88 Q 784 88 784 96 L 784 116 L448 116 ' style='fill:url(#tbg_3986C1);stroke:1;stroke-opacity:0.1;' />
<rect class='entity' x='448' y='88' width='336' height='144' rx='8' ry='8' style='fill:none;stroke:#3986C1'/>
<a xlink:href='#availability_group_listeners'><text x='525' y='108'>sys.availability_group_listeners</text><title>Table sys.availability_group_listeners
For each Always On availability group, returns either zero rows indicating that no network name is associated with the availability group, or returns a row for each availability-group listener configuration in the Windows Server Failover Clustering (WSFC) cluster. This view displays the real-time configuration gathered from cluster.</title></a>
  <use id='nn' x='450' y='125' xlink:href='#nn'/><a xlink:href='#availability_group_listeners.group_id'><text id='sys.availability_group_listeners.group_id' x='467' y='135' onmouseover="hghl(['availability_group_listeners_Fk_availability_group_listeners_availability_groups','sys.availability_groups.group_id'])" onmouseout="uhghl(['availability_group_listeners_Fk_availability_group_listeners_availability_groups','sys.availability_groups.group_id'])">group_id</text><text x='768' y='136' text-anchor='end' class='colType'>uniqueidentifier</text><title>group_id
* uniqueidentifier
Availability group ID (group_id) from sys.availability_groups.</title></a>
<a xlink:href='#availability_group_listeners.group_id'><use id='fk' x='772' y='124' xlink:href='#fk'/><title>References availability_groups ( group_id ) </title></a>
  <use id='nn' x='450' y='141' xlink:href='#nn'/><a xlink:href='#availability_group_listeners.listener_id'><text id='sys.availability_group_listeners.listener_id' x='467' y='151' onmouseover="hghl(['availability_group_listener_ip_addresses_Fk_availability_group_listener_ip_addresses_availability_group_listeners','sys.availability_group_listener_ip_addresses.listener_id'])" onmouseout="uhghl(['availability_group_listener_ip_addresses_Fk_availability_group_listener_ip_addresses_availability_group_listeners','sys.availability_group_listener_ip_addresses.listener_id'])">listener_id</text><text x='768' y='152' text-anchor='end' class='colType'>nvarchar(36)</text><title>listener_id
* nvarchar(36)
GUID from the cluster resource ID.</title></a>
<a xlink:href='#availability_group_listeners.listener_id'><use id='ref' x='772' y='140' xlink:href='#ref'/><title>Referred by availability_group_listener_ip_addresses ( listener_id ) </title></a>
  <a xlink:href='#availability_group_listeners.dns_name'><text id='sys.availability_group_listeners.dns_name' x='467' y='167'>dns_name</text><text x='768' y='168' text-anchor='end' class='colType'>nvarchar(63)</text><title>dns_name
nvarchar(63)
Configured network name (hostname) of the availability group listener.</title></a>
  <a xlink:href='#availability_group_listeners.port'><text id='sys.availability_group_listeners.port' x='467' y='183'>port</text><text x='768' y='184' text-anchor='end' class='colType'>int</text><title>port
int
The TCP port number configured for the availability group listener.

NULL = Listener was configured outside SQL Server and its port number has not been added to the availability group. To add the port, pleaseuse the MODIFY LISTENER option of the ALTER AVAILABILITY GROUP Transact-SQL statement.</title></a>
  <use id='nn' x='450' y='189' xlink:href='#nn'/><a xlink:href='#availability_group_listeners.is_conformant'><text id='sys.availability_group_listeners.is_conformant' x='467' y='199'>is_conformant</text><text x='768' y='200' text-anchor='end' class='colType'>bit</text><title>is_conformant
* bit
Whether this IP configuration is conformant, one of:

1 = Listener is conformant. Only “OR” relations exist among its Internet Protocol (IP) addresses. Conformant encompasses every an IP configuration that was created by the CREATE AVAILABILITY GROUP Transact-SQL statement. In addition, if an IP configuration that was created outside of SQL Server, for example by using the WSFC Failover Cluster Manager, but can be modified by the ALTER AVAILABILITY GROUP tsql statement, the IP configuration qualifies as conformant.

0 = Listener is nonconformant. Typically, this indicates an IP address that could not be configured by using SQL Server commands and, instead, was defined directly in the WSFC cluster.</title></a>
  <a xlink:href='#availability_group_listeners.ip_configuration_string_from_cluster'><text id='sys.availability_group_listeners.ip_configuration_string_from_cluster' x='467' y='215'>ip_configuration_string_from_cluster</text><text x='768' y='216' text-anchor='end' class='colType'>nvarchar(4000)</text><title>ip_configuration_string_from_cluster
nvarchar(4000)
Cluster IP configuration strings, if any, for this listener. NULL = Listener has no virtual IP addresses. For example:

IPv4 address: 65.55.39.10.

IPv6 address: 2001::4898:23:1002:20f:1fff:feff:b3a3</title></a>

<!-- == Table 'availability_group_listener_ip_addresses' == -->
<rect class='entity' x='944' y='72' width='272' height='192' rx='8' ry='8' style='stroke:none'/>
<path d='M 944 100 L 944 80 Q 944 72 952 72 L 1208 72 Q 1216 72 1216 80 L 1216 100 L944 100 ' style='fill:url(#tbg_B3801A);stroke:1;stroke-opacity:0.1;' />
<rect class='entity' x='944' y='72' width='272' height='192' rx='8' ry='8' style='fill:none;stroke:#B3801A'/>
<a xlink:href='#availability_group_listener_ip_addresses'><text x='952' y='92'>sys.availability_group_listener_ip_addresses</text><title>Table sys.availability_group_listener_ip_addresses
Returns a row for every IP address that is associated with any Always On availability group listener in the Windows Server Failover Clustering (WSFC) cluster.</title></a>
  <use id='nn' x='946' y='109' xlink:href='#nn'/><a xlink:href='#availability_group_listener_ip_addresses.listener_id'><text id='sys.availability_group_listener_ip_addresses.listener_id' x='963' y='119' onmouseover="hghl(['availability_group_listener_ip_addresses_Fk_availability_group_listener_ip_addresses_availability_group_listeners','sys.availability_group_listeners.listener_id'])" onmouseout="uhghl(['availability_group_listener_ip_addresses_Fk_availability_group_listener_ip_addresses_availability_group_listeners','sys.availability_group_listeners.listener_id'])">listener_id</text><text x='1200' y='120' text-anchor='end' class='colType'>nvarchar(36)</text><title>listener_id
* nvarchar(36)
Resource GUID from Windows Server Failover Clustering (WSFC) cluster.</title></a>
<a xlink:href='#availability_group_listener_ip_addresses.listener_id'><use id='fk' x='1204' y='108' xlink:href='#fk'/><title>References availability_group_listeners ( listener_id ) </title></a>
  <a xlink:href='#availability_group_listener_ip_addresses.ip_address'><text id='sys.availability_group_listener_ip_addresses.ip_address' x='963' y='135'>ip_address</text><text x='1200' y='136' text-anchor='end' class='colType'>nvarchar(48)</text><title>ip_address
nvarchar(48)
Configured virtual IP address of the availability group listener. Returns a single IPv4 or IPv6 address.</title></a>
  <a xlink:href='#availability_group_listener_ip_addresses.ip_subnet_mask'><text id='sys.availability_group_listener_ip_addresses.ip_subnet_mask' x='963' y='151'>ip_subnet_mask</text><text x='1200' y='152' text-anchor='end' class='colType'>nvarchar(15)</text><title>ip_subnet_mask
nvarchar(15)
Configured IP subnet mask for the IPv4 address, if any, that is configured for the availability group listener.

NULL = IPv6 subnet</title></a>
  <use id='nn' x='946' y='157' xlink:href='#nn'/><a xlink:href='#availability_group_listener_ip_addresses.is_dhcp'><text id='sys.availability_group_listener_ip_addresses.is_dhcp' x='963' y='167'>is_dhcp</text><text x='1200' y='168' text-anchor='end' class='colType'>bit</text><title>is_dhcp
* bit
Whether the IP address is configured by DHCP, one of:

0 = IP address is not configured by DHCP.

1 = IP address is configured by DHCP</title></a>
  <a xlink:href='#availability_group_listener_ip_addresses.network_subnet_ip'><text id='sys.availability_group_listener_ip_addresses.network_subnet_ip' x='963' y='183'>network_subnet_ip</text><text x='1200' y='184' text-anchor='end' class='colType'>nvarchar(48)</text><title>network_subnet_ip
nvarchar(48)
Network subnet IP address that specifies the subnet to which the IP address belongs.</title></a>
  <a xlink:href='#availability_group_listener_ip_addresses.network_subnet_prefix_length'><text id='sys.availability_group_listener_ip_addresses.network_subnet_prefix_length' x='963' y='199'>network_subnet_prefix_length</text><text x='1200' y='200' text-anchor='end' class='colType'>int</text><title>network_subnet_prefix_length
int
Network subnet prefix length of the subnet to which the IP address belongs.</title></a>
  <a xlink:href='#availability_group_listener_ip_addresses.network_subnet_ipv4_mask'><text id='sys.availability_group_listener_ip_addresses.network_subnet_ipv4_mask' x='963' y='215'>network_subnet_ipv4_mask</text><text x='1200' y='216' text-anchor='end' class='colType'>nvarchar(48)</text><title>network_subnet_ipv4_mask
nvarchar(48)
Network subnet mask of the subnet to which the IP address belongs. network_subnet_ipv4_mask to specify the DHCP &lt;network_subnet_option&gt; options in a WITH DHCP clause of the CREATE AVAILABILITY GROUP or ALTER AVAILABILITY GROUP Transact-SQL statement.

NULL = IPv6 subnet</title></a>
  <a xlink:href='#availability_group_listener_ip_addresses.state'><text id='sys.availability_group_listener_ip_addresses.state' x='963' y='231'>state</text><text x='1200' y='232' text-anchor='end' class='colType'>tinyint</text><title>state
tinyint
IP resource ONLINE/OFFLINE state from the WSFC cluster, one of:

1 = Online. IP resource is online.

0 = Offline. IP resource is offline.

2 = Online Pending. IP resource is offline but is being brought online.

3 = Failed. IP resource was being brought online but failed.</title></a>
  <a xlink:href='#availability_group_listener_ip_addresses.state_desc'><text id='sys.availability_group_listener_ip_addresses.state_desc' x='963' y='247'>state_desc</text><text x='1200' y='248' text-anchor='end' class='colType'>nvarchar(60)</text><title>state_desc
nvarchar(60)
Description of state, one of:

ONLINE

OFFLINE

ONLINE_PENDING

FAILED</title></a>

<!-- == Callout == -->
<rect class='callout' x='48' y='96' width='320' height='117' rx='16' ry='16'  />
<text x='72' y='96' class='callout'>
    <tspan x='52' dx='8' dy='17'>SQL Server 2017 Availability Groups Schema   </tspan>
    <tspan x='52' dx='8' dy='17'>&nbsp;</tspan>
    <tspan x='52' dx='8' dy='17'>author&#58; mattmc3</tspan>
    <tspan x='52' dx='8' dy='17'>homepage&#58; https&#58;&#47;&#47;github&#46;com&#47;mattmc3&#47;sp&#95;ag&#95;health</tspan>
    <tspan x='52' dx='8' dy='17'>&nbsp;</tspan>
    <tspan x='52' dx='8' dy='17'>MS docs&#58; https&#58;&#47;&#47;bit&#46;ly&#47;2xGe3BK</tspan>
</text>
</g></svg></div>


<br><br>
<div class='card'><div class='card-body'><a name='availability_databases_cluster' onclick='window.scrollTo(72, 960);return false;' style='cursor:pointer;'><h4 class='card-title'>Table sys.availability_databases_cluster</h4></a>
<p class="text-muted">Contains one row for each availability database on the instance of SQL Server that is hosting an availability replica for any Always On availability group in the Windows Server Failover Clustering (WSFC) cluster, regardless of whether the local copy database has been joined to the availability group yet.</p>
<table class='table-sm table-bordered'>
<thead>
<tr><th>Indexes</th><th>Field Name</th><th>Data Type</th><th>Description</th></tr></thead>
<tbody>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#fk'/></svg></td>
		<td><a name='availability_databases_cluster.group_id'>group&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Unique identifier of the availability group in which the availability group&#44; if any&#44; in which the database is participating&#46;

NULL &#61; database is not part of an availability replica of in availability group&#46; </td>
	</tr>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#ref'/></svg></td>
		<td><a name='availability_databases_cluster.group_database_id'>group&#95;database&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Unique identifier of the database within the availability group&#44; if any&#44; in which the database is participating&#46; group&#95;database&#95;id is the same for this database on the primary replica and on every secondary replica on which the database has been joined to the availability group&#46;

NULL &#61; database is not part of an availability replica in any availability group&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_databases_cluster.database_name'>database&#95;name</a></td>
		<td> sysname   </td>
		<td> Name of the database that was added to the availability group&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_databases_cluster.truncation_lsn'>truncation&#95;lsn</a></td>
		<td> numeric&#40; 25&#44; 0 &#41;   </td>
		<td>  </td>
	</tr>
</tbody>
</table></div></div>

<br><br>
<div class='card'><div class='card-body'><a name='availability_group_listener_ip_addresses' onclick='window.scrollTo(744, 80);return false;' style='cursor:pointer;'><h4 class='card-title'>Table sys.availability_group_listener_ip_addresses</h4></a>
<p class="text-muted">Returns a row for every IP address that is associated with any Always On availability group listener in the Windows Server Failover Clustering (WSFC) cluster.</p>
<table class='table-sm table-bordered'>
<thead>
<tr><th>Indexes</th><th>Field Name</th><th>Data Type</th><th>Description</th></tr></thead>
<tbody>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#fk'/></svg></td>
		<td><a name='availability_group_listener_ip_addresses.listener_id'>listener&#95;id</a></td>
		<td> nvarchar&#40; 36 &#41;   </td>
		<td> Resource GUID from Windows Server Failover Clustering &#40;WSFC&#41; cluster&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_group_listener_ip_addresses.ip_address'>ip&#95;address</a></td>
		<td> nvarchar&#40; 48 &#41;   </td>
		<td> Configured virtual IP address of the availability group listener&#46; Returns a single IPv4 or IPv6 address&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_group_listener_ip_addresses.ip_subnet_mask'>ip&#95;subnet&#95;mask</a></td>
		<td> nvarchar&#40; 15 &#41;   </td>
		<td> Configured IP subnet mask for the IPv4 address&#44; if any&#44; that is configured for the availability group listener&#46;

NULL &#61; IPv6 subnet </td>
	</tr>
	<tr>
		<td>*</td>
		<td><a name='availability_group_listener_ip_addresses.is_dhcp'>is&#95;dhcp</a></td>
		<td> bit   </td>
		<td> Whether the IP address is configured by DHCP&#44; one of&#58;

0 &#61; IP address is not configured by DHCP&#46;

1 &#61; IP address is configured by DHCP </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_group_listener_ip_addresses.network_subnet_ip'>network&#95;subnet&#95;ip</a></td>
		<td> nvarchar&#40; 48 &#41;   </td>
		<td> Network subnet IP address that specifies the subnet to which the IP address belongs&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_group_listener_ip_addresses.network_subnet_prefix_length'>network&#95;subnet&#95;prefix&#95;length</a></td>
		<td> int   </td>
		<td> Network subnet prefix length of the subnet to which the IP address belongs&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_group_listener_ip_addresses.network_subnet_ipv4_mask'>network&#95;subnet&#95;ipv4&#95;mask</a></td>
		<td> nvarchar&#40; 48 &#41;   </td>
		<td> Network subnet mask of the subnet to which the IP address belongs&#46; network&#95;subnet&#95;ipv4&#95;mask to specify the DHCP &lt;network&#95;subnet&#95;option&gt; options in a WITH DHCP clause of the CREATE AVAILABILITY GROUP or ALTER AVAILABILITY GROUP Transact&#45;SQL statement&#46;

NULL &#61; IPv6 subnet </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_group_listener_ip_addresses.state'>state</a></td>
		<td> tinyint   </td>
		<td> IP resource ONLINE&#47;OFFLINE state from the WSFC cluster&#44; one of&#58;

1 &#61; Online&#46; IP resource is online&#46;

0 &#61; Offline&#46; IP resource is offline&#46;

2 &#61; Online Pending&#46; IP resource is offline but is being brought online&#46;

3 &#61; Failed&#46; IP resource was being brought online but failed&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_group_listener_ip_addresses.state_desc'>state&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of state&#44; one of&#58;

ONLINE

OFFLINE

ONLINE&#95;PENDING

FAILED </td>
	</tr>
</tbody>
</table></div></div>

<br><br>
<div class='card'><div class='card-body'><a name='availability_group_listeners' onclick='window.scrollTo(248, 96);return false;' style='cursor:pointer;'><h4 class='card-title'>Table sys.availability_group_listeners</h4></a>
<p class="text-muted">For each Always On availability group, returns either zero rows indicating that no network name is associated with the availability group, or returns a row for each availability-group listener configuration in the Windows Server Failover Clustering (WSFC) cluster. This view displays the real-time configuration gathered from cluster.</p>
<table class='table-sm table-bordered'>
<thead>
<tr><th>Indexes</th><th>Field Name</th><th>Data Type</th><th>Description</th></tr></thead>
<tbody>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#fk'/></svg></td>
		<td><a name='availability_group_listeners.group_id'>group&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Availability group ID &#40;group&#95;id&#41; from sys&#46;availability&#95;groups&#46; </td>
	</tr>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#ref'/></svg></td>
		<td><a name='availability_group_listeners.listener_id'>listener&#95;id</a></td>
		<td> nvarchar&#40; 36 &#41;   </td>
		<td> GUID from the cluster resource ID&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_group_listeners.dns_name'>dns&#95;name</a></td>
		<td> nvarchar&#40; 63 &#41;   </td>
		<td> Configured network name &#40;hostname&#41; of the availability group listener&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_group_listeners.port'>port</a></td>
		<td> int   </td>
		<td> The TCP port number configured for the availability group listener&#46;

NULL &#61; Listener was configured outside SQL Server and its port number has not been added to the availability group&#46; To add the port&#44; pleaseuse the MODIFY LISTENER option of the ALTER AVAILABILITY GROUP Transact&#45;SQL statement&#46; </td>
	</tr>
	<tr>
		<td>*</td>
		<td><a name='availability_group_listeners.is_conformant'>is&#95;conformant</a></td>
		<td> bit   </td>
		<td> Whether this IP configuration is conformant&#44; one of&#58;

1 &#61; Listener is conformant&#46; Only “OR” relations exist among its Internet Protocol &#40;IP&#41; addresses&#46; Conformant encompasses every an IP configuration that was created by the CREATE AVAILABILITY GROUP Transact&#45;SQL statement&#46; In addition&#44; if an IP configuration that was created outside of SQL Server&#44; for example by using the WSFC Failover Cluster Manager&#44; but can be modified by the ALTER AVAILABILITY GROUP tsql statement&#44; the IP configuration qualifies as conformant&#46;

0 &#61; Listener is nonconformant&#46; Typically&#44; this indicates an IP address that could not be configured by using SQL Server commands and&#44; instead&#44; was defined directly in the WSFC cluster&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_group_listeners.ip_configuration_string_from_cluster'>ip&#95;configuration&#95;string&#95;from&#95;cluster</a></td>
		<td> nvarchar&#40; 4000 &#41;   </td>
		<td> Cluster IP configuration strings&#44; if any&#44; for this listener&#46; NULL &#61; Listener has no virtual IP addresses&#46; For example&#58;

IPv4 address&#58; 65&#46;55&#46;39&#46;10&#46;

IPv6 address&#58; 2001&#58;&#58;4898&#58;23&#58;1002&#58;20f&#58;1fff&#58;feff&#58;b3a3 </td>
	</tr>
</tbody>
</table></div></div>

<br><br>
<div class='card'><div class='card-body'><a name='availability_groups' onclick='window.scrollTo(248, 352);return false;' style='cursor:pointer;'><h4 class='card-title'>Table sys.availability_groups</h4></a>
<p class="text-muted">Returns a row for each availability group for which the local instance of SQL Server hosts an availability replica. Each row contains a cached copy of the availability group metadata.</p>
<table class='table-sm table-bordered'>
<thead>
<tr><th>Indexes</th><th>Field Name</th><th>Data Type</th><th>Description</th></tr></thead>
<tbody>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#ref'/></svg></td>
		<td><a name='availability_groups.group_id'>group&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Unique identifier &#40;GUID&#41; of the availability group&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups.name'>name</a></td>
		<td> sysname   </td>
		<td> Name of the availability group&#46; This is a user&#45;specified name that must be unique within the Windows Server Failover Cluster &#40;WSFC&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups.resource_id'>resource&#95;id</a></td>
		<td> nvarchar&#40; 40 &#41;   </td>
		<td> Resource ID for the WSFC cluster resource&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups.resource_group_id'>resource&#95;group&#95;id</a></td>
		<td> nvarchar&#40; 40 &#41;   </td>
		<td> Resource Group ID for the WSFC cluster resource group of the availability group&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups.failure_condition_level'>failure&#95;condition&#95;level</a></td>
		<td> int   </td>
		<td> User&#45;defined failure condition level under which an automatic failover must be triggered&#44; one of the integer values shown in the table immediately below this table&#46;

The failure&#45;condition levels &#40;1–5&#41; range from the least restrictive&#44; level 1&#44; to the most restrictive&#44; level 5&#46; A given condition level encompasses all of the less restrictive levels&#46; Thus&#44; the strictest condition level&#44; 5&#44; includes the four less restrictive condition levels &#40;1&#45;4&#41;&#44; level 4 includes levels 1&#45;3&#44; and so forth&#46;

To change this value&#44; use the FAILURE&#95;CONDITION&#95;LEVEL option of the ALTER AVAILABILITY GROUP Transact&#45;SQL statement&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups.health_check_timeout'>health&#95;check&#95;timeout</a></td>
		<td> int   </td>
		<td> Wait time &#40;in milliseconds&#41; for the sp&#95;server&#95;diagnostics system stored procedure to return server&#45;health information&#44; before the server instance is assumed to be slow or hung&#46; The default value is 30000 milliseconds &#40;30 seconds&#41;&#46;

To change this value&#44; use the HEALTH&#95;CHECK&#95;TIMEOUT option of the ALTER AVAILABILITY GROUP Transact&#45;SQL statement&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups.automated_backup_preference'>automated&#95;backup&#95;preference</a></td>
		<td> tinyint   </td>
		<td> Preferred location for performing backups on the availability databases in this availability group&#46; The following are the possible values and their descriptions&#46;



0 &#58; Primary&#46; Backups should always occur on the primary replica&#46;

1 &#58; Secondary only&#46; Performing backups on a secondary replica is preferable&#46;

2 &#58; Prefer Secondary&#46; Performing backups on a secondary replica preferable&#44; but performing backups on the primary replica is acceptable if no secondary replica is available for backup operations&#46; This is the default behavior&#46;

3 &#58; Any Replica&#46; No preference about whether backups are performed on the primary replica or on a secondary replica&#46;



For more information&#44; see Active Secondaries&#58; Backup on Secondary Replicas &#40;Always On Availability Groups&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups.automated_backup_preference_desc'>automated&#95;backup&#95;preference&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of automated&#95;backup&#95;preference&#44; one of&#58;

PRIMARY

SECONDARY&#95;ONLY

SECONDARY

NONE </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups.version'>version</a></td>
		<td> smallint   </td>
		<td> The version of the availability group metadata stored in the Windows Failover Cluster&#46; This version number is incremented when new features are added&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups.basic_features'>basic&#95;features</a></td>
		<td> bit   </td>
		<td> Specifies whether this is a Basic availability group&#46; For more information&#44; see Basic Availability Groups &#40;Always On Availability Groups&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups.dtc_support'>dtc&#95;support</a></td>
		<td> bit   </td>
		<td> Specifies whether DTC support has been enabled for this availability group&#46; The DTC&#95;SUPPORT option of CREATE AVAILABILITY GROUP controls this setting&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups.db_failover'>db&#95;failover</a></td>
		<td> bit   </td>
		<td> Specifies whether the availability group supports failover for database health conditions&#46; The DB&#95;FAILOVER option of CREATE AVAILABILITY GROUP controls this setting&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups.is_distributed'>is&#95;distributed</a></td>
		<td> bit   </td>
		<td> Specifies whether this is a distributed availability group&#46; For more information&#44; see Distributed Availability Groups &#40;Always On Availability Groups&#41;&#46; </td>
	</tr>
</tbody>
</table></div></div>

<br><br>
<div class='card'><div class='card-body'><a name='availability_groups_cluster' onclick='window.scrollTo(60, 352);return false;' style='cursor:pointer;'><h4 class='card-title'>Table sys.availability_groups_cluster</h4></a>
<p class="text-muted">Returns a row for each Always On availability group in the Windows Server Failover Clustering (WSFC) . Each row contains the availability group metadata from the WSFC cluster.</p>
<table class='table-sm table-bordered'>
<thead>
<tr><th>Indexes</th><th>Field Name</th><th>Data Type</th><th>Description</th></tr></thead>
<tbody>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#fk'/></svg></td>
		<td><a name='availability_groups_cluster.group_id'>group&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Unique identifier &#40;GUID&#41; of the availability group&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups_cluster.name'>name</a></td>
		<td> sysname   </td>
		<td> Name of the availability group&#46; This is a user&#45;specified name that must be unique within the Windows Server Failover Cluster &#40;WSFC&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups_cluster.resource_id'>resource&#95;id</a></td>
		<td> nvarchar&#40; 40 &#41;   </td>
		<td> Resource ID for the WSFC cluster resource&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups_cluster.resource_group_id'>resource&#95;group&#95;id</a></td>
		<td> nvarchar&#40; 40 &#41;   </td>
		<td> Resource Group ID for the WSFC cluster resource group of the availability group&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups_cluster.failure_condition_level'>failure&#95;condition&#95;level</a></td>
		<td> int   </td>
		<td> User&#45;defined failure condition level under which an automatic failover must be triggered&#44; one of the following integer values&#58;

1&#58; Specifies that an automatic failover should be initiated when any of the following occurs&#58; 
&#45; The SQL Server service is down&#46;
&#45; The lease of the availability group for connecting to the WSFC failover cluster expires because no ACK is received from the server instance&#46; For more information&#44; see How It Works&#58; SQL Server Always On Lease Timeout&#46;

2&#58; Specifies that an automatic failover should be initiated when any of the following occurs&#58; 
&#45; The instance of SQL Server does not connect to cluster&#44; and the user&#45;specified health&#95;check&#95;timeout threshold of the availability group is exceeded&#46; 
&#45; The availability replica is in failed state&#46; 
3&#58; Specifies that an automatic failover should be initiated on critical SQL Server internal errors&#44; such as orphaned spinlocks&#44; serious write&#45;access violations&#44; or too much dumping&#46; This is the default value&#46; 
4&#58; Specifies that an automatic failover should be initiated on moderate SQL Server internal errors&#44; such as a persistent out&#45;of&#45;memory condition in the SQL Server internal resource pool&#46;
5&#58; Specifies that an automatic failover should be initiated on any qualified failure conditions&#44; including&#58;
&#45; Exhaustion of SQL Engine worker&#45;threads&#46; 
&#45; Detection of an unsolvable deadlock&#46;

The failure&#45;condition levels &#40;1–5&#41; range from the least restrictive&#44; level 1&#44; to the most restrictive&#44; level 5&#46; A given condition level encompasses all of the less restrictive levels&#46; Thus&#44; the strictest condition level&#44; 5&#44; includes the four less restrictive condition levels &#40;1&#45;4&#41;&#44; level 4 includes levels 1&#45;3&#44; and so forth&#46;

To change this value&#44; use the FAILURE&#95;CONDITION&#95;LEVEL option of the ALTER AVAILABILITY GROUP Transact&#45;SQL statement&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups_cluster.health_check_timeout'>health&#95;check&#95;timeout</a></td>
		<td> int   </td>
		<td> Wait time &#40;in milliseconds&#41; for the sp&#95;server&#95;diagnostics system stored procedure to return server&#45;health information&#44; before the server instance is assumed to be slow or hung&#46; The default value is 30000 milliseconds &#40;30 seconds&#41;&#46;

To change this value&#44; use the HEALTH&#95;CHECK&#95;TIMEOUT option of ALTER AVAILABILITY GROUP Transact&#45;SQL statement&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups_cluster.automated_backup_preference'>automated&#95;backup&#95;preference</a></td>
		<td> tinyint   </td>
		<td> Preferred location for performing backups on the availability databases in this availability group&#46; One of the following values&#58;

0&#58; Primary&#46; Backups should always occur on the primary replica&#46;
1&#58; Secondary only&#46; Performing backups on a secondary replica is preferable&#46;
2&#58; Prefer Secondary&#46; Performing backups on a secondary replica preferable&#44; but performing backups on the primary replica is acceptable if no secondary replica is available for backup operations&#46; This is the default behavior&#46;
3&#58; Any Replica&#46; No preference about whether backups are performed on the primary replica or on a secondary replica&#46;

For more information&#44; see Active Secondaries&#58; Backup on Secondary Replicas &#40;Always On Availability Groups&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_groups_cluster.automated_backup_preference_desc'>automated&#95;backup&#95;preference&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of automated&#95;backup&#95;preference&#44; one of&#58;

PRIMARY

SECONDARY&#95;ONLY

SECONDARY

NONE </td>
	</tr>
</tbody>
</table></div></div>

<br><br>
<div class='card'><div class='card-body'><a name='availability_replicas' onclick='window.scrollTo(696, 336);return false;' style='cursor:pointer;'><h4 class='card-title'>Table sys.availability_replicas</h4></a>
<p class="text-muted">Returns a row for each of the availability replicas that belong to any Always On availability group in the WSFC failover cluster.

If the local server instance is unable to talk to the WSFC failover cluster, for example because the cluster is down or quorum has been lost, only rows for local availability replicas are returned. These rows will contain only the columns of data that are cached locally in metadata.</p>
<table class='table-sm table-bordered'>
<thead>
<tr><th>Indexes</th><th>Field Name</th><th>Data Type</th><th>Description</th></tr></thead>
<tbody>
	<tr>
		<td><svg width='14' height='14'><use xlink:href='#ref'/></svg></td>
		<td><a name='availability_replicas.replica_id'>replica&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Unique ID of the replica&#46; </td>
	</tr>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#fk'/></svg></td>
		<td><a name='availability_replicas.group_id'>group&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Unique ID of the availability group to which the replica belongs&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.replica_metadata_id'>replica&#95;metadata&#95;id</a></td>
		<td> int   </td>
		<td> ID for the local metadata object for availability replicas in the Database Engine&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.replica_server_name'>replica&#95;server&#95;name</a></td>
		<td> nvarchar&#40; 256 &#41;   </td>
		<td> Server name of the instance of SQL Server that is hosting this replica and&#44; for a non&#45;default instance&#44; its instance name&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.owner_sid'>owner&#95;sid</a></td>
		<td> varbinary&#40; 85 &#41;   </td>
		<td> Security identifier &#40;SID&#41; registered to this server instance for the external owner of this availability replica&#46;

NULL for non&#45;local availability replicas&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.endpoint_url'>endpoint&#95;url</a></td>
		<td> nvarchar&#40; 256 &#41;   </td>
		<td> String representation of the user&#45;specified database mirroring endpoint that is used by connections between primary and secondary replicas for data synchronization&#46; For information about the syntax of endpoint URLs&#44; see Specify the Endpoint URL When Adding or Modifying an Availability Replica &#40;SQL Server&#41;&#46;

NULL &#61; Unable to talk to the WSFC failover cluster&#46;

To change this endpoint&#44; use the ENDPOINT&#95;URL option of ALTER AVAILABILITY GROUP Transact&#45;SQL statement&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.availability_mode'>availability&#95;mode</a></td>
		<td> tinyint   </td>
		<td> The availability mode of the replica&#44; one of&#58;

0 &#124; Asynchronous commit&#46; The primary replica can commit transactions without waiting for the secondary to write the log to disk&#46;

1 &#124; Synchronous commit&#46; The primary replica waits to commit a given transaction until the secondary replica has written the transaction to disk&#46;

4 &#124; Configuration only&#46; The primary replica sends availability group configuration metadata to the replica synchronously&#46; User data is not transmitted to the replica&#46; Available in SQL Server 2017 CU1 and later&#46;

For more information&#44; see Availability Modes &#40;Always On Availability Groups&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.availability_mode_desc'>availability&#95;mode&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of availability&#95;mode&#44; one of&#58;

ASYNCHRONOUS&#95;COMMIT

SYNCHRONOUS&#95;COMMIT

CONFIGURATION&#95;ONLY

To change this the availability mode of an availability replica&#44; use the AVAILABILITY&#95;MODE option of ALTER AVAILABILITY GROUP Transact&#45;SQL statement&#46;

You cannot change the availability mode of a replica to CONFIGURATION&#95;ONLY&#46; You cannot change a CONFIGURATION&#95;ONLY replica to a secondary or primary replica&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.failover_mode'>failover&#95;mode</a></td>
		<td> tinyint   </td>
		<td> The failover mode of the availability replica&#44; one of&#58;

0 &#124; Manual failover&#46; A failover to a secondary replica set to manual failover must be manually initiated by the database administrator&#46; The type of failover that is performed will depend on whether the secondary replica is synchronized&#44; as follows&#58;

If the availability replica is not synchronizing or is still synchronizing&#44; only forced failover &#40;with possible data loss&#41; can occur&#46;

If the availability mode is set to synchronous commit &#40;availability&#95;mode &#61; 1&#41; and the availability replica is currently synchronized&#44; manual failover without data loss can occur&#46;

1 &#124; Automatic failover&#46; The replica is a potential target for automatic failovers&#46; Automatic failover is supported only if the availability mode is set to synchronous commit &#40;availability&#95;mode &#61; 1&#41; and the availability replica is currently synchronized&#46;

To view a rollup of the database synchronization health of every availability database in an availability replica&#44; use the synchronization&#95;health and synchronization&#95;health&#95;desc columns of the sys&#46;dm&#95;hadr&#95;availability&#95;replica&#95;states dynamic management view&#46; The rollup considers the synchronization state of every availability database and the availability mode of its availability replica&#46;

Note&#58; To view the synchronization health of a given availability database&#44; query the synchronization&#95;state and synchronization&#95;health columns of the sys&#46;dm&#95;hadr&#95;database&#95;replica&#95;states dynamic management view&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.failover_mode_desc'>failover&#95;mode&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of failover&#95;mode&#44; one of&#58;

MANUAL

AUTOMATIC

To change the failover mode&#44; use the FAILOVER&#95;MODE option of ALTER AVAILABILITY GROUP Transact&#45;SQL statement&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.session_timeout'>session&#95;timeout</a></td>
		<td> int   </td>
		<td> The time&#45;out period&#44; in seconds&#46; The time&#45;out period is the maximum time that the replica waits to receive a message from another replica before considering connection between the primary and secondary replica have failed&#46; Session timeout detects whether secondaries are connected the primary replica&#46;

On detecting a failed connection with a secondary replica&#44; the primary replica considers the secondary replica to be NOT&#95;SYNCHRONIZED&#46; On detecting a failed connection with the primary replica&#44; a secondary replica simply attempts to reconnect&#46;

Note&#58; Session timeouts do not cause automatic failovers&#46;

To change this value&#44; use the SESSION&#95;TIMEOUT option of ALTER AVAILABILITY GROUP Transact&#45;SQL statement&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.primary_role_allow_connections'>primary&#95;role&#95;allow&#95;connections</a></td>
		<td> tinyint   </td>
		<td> Whether the availability allows all connections or only read&#45;write connections&#44; one of&#58;

2 &#61; All &#40;default&#41;

3 &#61; Read write </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.primary_role_allow_connections_desc'>primary&#95;role&#95;allow&#95;connections&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of primary&#95;role&#95;allow&#95;connections&#44; one of&#58;

ALL

READ&#95;WRITE </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.secondary_role_allow_connections'>secondary&#95;role&#95;allow&#95;connections</a></td>
		<td> tinyint   </td>
		<td> Whether an availability replica that is performing the secondary role &#40;that is&#44; a secondary replica&#41; can accept connections from clients&#44; one of&#58;

0 &#61; No&#46; No connections are allowed to the databases in the secondary replica&#44; and the databases are not available for read access&#46; This is the default setting&#46;

1 &#61; Read only&#46; Only read&#45;only connections are allowed to the databases in the secondary replica&#46; All database&#40;s&#41; in the replica are available for read access&#46;

2 &#61; All&#46; All connections are allowed to the databases in the secondary replica for read&#45;only access&#46;

For more information&#44; see Active Secondaries&#58; Readable Secondary Replicas &#40;Always On Availability Groups&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.secondary_role_allow_connections_desc'>secondary&#95;role&#95;allow&#95;connections&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of secondary&#95;role&#95;allow&#95;connections&#44; one of&#58;

NO

READ&#95;ONLY

ALL </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.create_date'>create&#95;date</a></td>
		<td> datetime   </td>
		<td> Date that the replica was created&#46;

NULL &#61; Replica not on this server instance&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.modify_date'>modify&#95;date</a></td>
		<td> datetime   </td>
		<td> Date that the replica was last modified&#46;

NULL &#61; Replica not on this server instance&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.backup_priority'>backup&#95;priority</a></td>
		<td> int   </td>
		<td> Represents the user&#45;specified priority for performing backups on this replica relative to the other replicas in the same availability group&#46; The value is an integer in the range of 0&#46;&#46;100&#46;

For more information&#44; see Active Secondaries&#58; Backup on Secondary Replicas &#40;Always On Availability Groups&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.read_only_routing_url'>read&#95;only&#95;routing&#95;url</a></td>
		<td> nvarchar&#40; 256 &#41;   </td>
		<td> Connectivity endpoint &#40;URL&#41; of the read only availability replica&#46; For more information&#44; see Configure Read&#45;Only Routing for an Availability Group &#40;SQL Server&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.seeding_mode'>seeding&#95;mode</a></td>
		<td> tinyint   </td>
		<td>  </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='availability_replicas.seeding_mode_desc'>seeding&#95;mode&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td>  </td>
	</tr>
</tbody>
</table></div></div>

<br><br>
<div class='card'><div class='card-body'><a name='dm_hadr_availability_group_states' onclick='window.scrollTo(60, 592);return false;' style='cursor:pointer;'><h4 class='card-title'>Table sys.dm_hadr_availability_group_states</h4></a>
<p class="text-muted">Returns a row for each Always On availability group that possesses an availability replica on the local instance of SQL Server. Each row displays the states that define the health of a given availability group.</p>
<table class='table-sm table-bordered'>
<thead>
<tr><th>Indexes</th><th>Field Name</th><th>Data Type</th><th>Description</th></tr></thead>
<tbody>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#fk'/></svg></td>
		<td><a name='dm_hadr_availability_group_states.group_id'>group&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Unique identifier of the availability group&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_group_states.primary_replica'>primary&#95;replica</a></td>
		<td> nvarchar&#40; 128 &#41;   </td>
		<td> Name of the server instance that is hosting the current primary replica&#46;

NULL &#61; Not the primary replica or unable to communicate with the WSFC failover cluster&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_group_states.primary_recovery_health'>primary&#95;recovery&#95;health</a></td>
		<td> tinyint   </td>
		<td> Indicates the recovery health of the primary replica&#44; one of&#58;

0 &#61; In progress

1 &#61; Online

NULL

On secondary replicas the primary&#95;recovery&#95;health column is NULL&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_group_states.primary_recovery_health_desc'>primary&#95;recovery&#95;health&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of primary&#95;replica&#95;health&#44; one of&#58;

ONLINE&#95;IN&#95;PROGRESS

ONLINE

NULL </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_group_states.secondary_recovery_health'>secondary&#95;recovery&#95;health</a></td>
		<td> tinyint   </td>
		<td> Indicates the recovery health of a secondary replica replica&#44;one of&#58;

0 &#61; In progress

1 &#61; Online

NULL

On the primary replica&#44; the secondary&#95;recovery&#95;health column is NULL&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_group_states.secondary_recovery_health_desc'>secondary&#95;recovery&#95;health&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of secondary&#95;recovery&#95;health&#44; one of&#58;

ONLINE&#95;IN&#95;PROGRESS

ONLINE

NULL </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_group_states.synchronization_health'>synchronization&#95;health</a></td>
		<td> tinyint   </td>
		<td> Reflects a rollup of the synchronization&#95;health of all availability replicas in the availability group&#46; Below are the possible values and their descriptions&#46;

0&#58; Not healthy&#46; None of the availability replicas have a healthy synchronization&#95;health &#40;2 &#61; HEALTHY&#41;&#46;

1&#58; Partially healthy&#46; The synchronization health of some&#44; but not all&#44; availability replicas is healthy&#46;

2&#58; Healthy&#46; The synchronization health of every availability replica is healthy&#46;

For information about replica synchronization health&#44; see the synchronization&#95;health column in sys&#46;dm&#95;hadr&#95;availability&#95;replica&#95;states &#40;Transact&#45;SQL&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_group_states.synchronization_health_desc'>synchronization&#95;health&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of synchronization&#95;health&#44; one of&#58;

NOT&#95;HEALTHY

PARTIALLY&#95;HEALTHY

HEALTHY </td>
	</tr>
</tbody>
</table></div></div>

<br><br>
<div class='card'><div class='card-body'><a name='dm_hadr_availability_replica_cluster_nodes' onclick='window.scrollTo(712, 752);return false;' style='cursor:pointer;'><h4 class='card-title'>Table sys.dm_hadr_availability_replica_cluster_nodes</h4></a>
<p class="text-muted">Returns a row for every availability replica (regardless of join state) of the Always On availability groups in the Windows Server Failover Clustering (WSFC) cluster.</p>
<table class='table-sm table-bordered'>
<thead>
<tr><th>Indexes</th><th>Field Name</th><th>Data Type</th><th>Description</th></tr></thead>
<tbody>
	<tr>
		<td>*</td>
		<td><a name='dm_hadr_availability_replica_cluster_nodes.group_name'>group&#95;name</a></td>
		<td> nvarchar&#40; 256 &#41;   </td>
		<td> Name of the availability group&#46; </td>
	</tr>
	<tr>
		<td>*</td>
		<td><a name='dm_hadr_availability_replica_cluster_nodes.replica_server_name'>replica&#95;server&#95;name</a></td>
		<td> nvarchar&#40; 256 &#41;   </td>
		<td> Name of the instance of SQL Server hosting the replica&#46; </td>
	</tr>
	<tr>
		<td>*</td>
		<td><a name='dm_hadr_availability_replica_cluster_nodes.node_name'>node&#95;name</a></td>
		<td> nvarchar&#40; 256 &#41;   </td>
		<td> Name of the cluster node&#46; </td>
	</tr>
</tbody>
</table></div></div>

<br><br>
<div class='card'><div class='card-body'><a name='dm_hadr_availability_replica_cluster_states' onclick='window.scrollTo(1176, 352);return false;' style='cursor:pointer;'><h4 class='card-title'>Table sys.dm_hadr_availability_replica_cluster_states</h4></a>
<p class="text-muted">Returns a row for each Always On availability replica (regardless of its join state) of all Always On availability groups (regardless of replica location) in the Windows Server Failover Clustering (WSFC) cluster.</p>
<table class='table-sm table-bordered'>
<thead>
<tr><th>Indexes</th><th>Field Name</th><th>Data Type</th><th>Description</th></tr></thead>
<tbody>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#fk'/></svg></td>
		<td><a name='dm_hadr_availability_replica_cluster_states.replica_id'>replica&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Unique identifier of the availability replica&#46; </td>
	</tr>
	<tr>
		<td>*</td>
		<td><a name='dm_hadr_availability_replica_cluster_states.replica_server_name'>replica&#95;server&#95;name</a></td>
		<td> nvarchar&#40; 256 &#41;   </td>
		<td> Name of the instance of SQL Server hosting the replica&#46; </td>
	</tr>
	<tr>
		<td>*</td>
		<td><a name='dm_hadr_availability_replica_cluster_states.group_id'>group&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Unique identifier of the availability group&#46; </td>
	</tr>
	<tr>
		<td>*</td>
		<td><a name='dm_hadr_availability_replica_cluster_states.join_state'>join&#95;state</a></td>
		<td> tinyint   </td>
		<td> 0 &#61; Not joined

1 &#61; Joined&#44; standalone instance

2 &#61; Joined&#44; failover cluster instance </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_replica_cluster_states.join_state_desc'>join&#95;state&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> NOT&#95;JOINED

JOINED&#95;STANDALONE&#95;INSTANCE

JOINED&#95;FAILOVER&#95;CLUSTER&#95;INSTANCE </td>
	</tr>
</tbody>
</table></div></div>

<br><br>
<div class='card'><div class='card-body'><a name='dm_hadr_availability_replica_states' onclick='window.scrollTo(1176, 496);return false;' style='cursor:pointer;'><h4 class='card-title'>Table sys.dm_hadr_availability_replica_states</h4></a>
<p class="text-muted">Returns a row for each local replica and a row for each remote replica in the same Always On availability group as a local replica. Each row contains information about the state of a given replica.</p>
<table class='table-sm table-bordered'>
<thead>
<tr><th>Indexes</th><th>Field Name</th><th>Data Type</th><th>Description</th></tr></thead>
<tbody>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#fk'/></svg></td>
		<td><a name='dm_hadr_availability_replica_states.replica_id'>replica&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Unique identifier of the replica&#46; </td>
	</tr>
	<tr>
		<td>*</td>
		<td><a name='dm_hadr_availability_replica_states.group_id'>group&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Unique identifier of the availability group&#46; </td>
	</tr>
	<tr>
		<td>*</td>
		<td><a name='dm_hadr_availability_replica_states.is_local'>is&#95;local</a></td>
		<td> bit   </td>
		<td> Whether the replica is local&#44; one of&#58;

0 &#61; Indicates a remote secondary replica in an availability group whose primary replica is hosted by the local server instance&#46; This value occurs only on the primary replica location&#46;

1 &#61; Indicates a local replica&#46; On secondary replicas&#44; this is the only available value for the availability group to which the replica belongs&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_replica_states.role'>role</a></td>
		<td> tinyint   </td>
		<td> Current Always On availability groups role of a local replica or a connected remote replica&#44; one of&#58;

0 &#61; Resolving

1 &#61; Primary

2 &#61; Secondary

For information about Always On availability groups roles&#44; see Overview of Always On Availability Groups &#40;SQL Server&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_replica_states.role_desc'>role&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of role&#44; one of&#58;

RESOLVING

PRIMARY

SECONDARY </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_replica_states.operational_state'>operational&#95;state</a></td>
		<td> tinyint   </td>
		<td> Current operational state of the replica&#44; one of&#58;

0 &#61; Pending failover

1 &#61; Pending

2 &#61; Online

3 &#61; Offline

4 &#61; Failed

5 &#61; Failed&#44; no quorum

NULL &#61; Replica is not local&#46;

For more information&#44; see Roles and Operational States&#44; later in this topic&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_replica_states.operational_state_desc'>operational&#95;state&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of operational&#95;state&#44; one of&#58;

PENDING&#95;FAILOVER

PENDING

ONLINE

OFFLINE

FAILED

FAILED&#95;NO&#95;QUORUM

NULL </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_replica_states.connected_state'>connected&#95;state</a></td>
		<td> tinyint   </td>
		<td> Whether a secondary replica is currently connected to the primary replica&#46; The possible values are shown below with their descriptions&#46;

0 &#58; Disconnected&#46; The response of an availability replica to the DISCONNECTED state depends on its role&#58; On the primary replica&#44; if a secondary replica is disconnected&#44; its secondary databases are marked as NOT SYNCHRONIZED on the primary replica&#44; which waits for the secondary to reconnect&#59; On a secondary replica&#44; upon detecting that it is disconnected&#44; the secondary replica attempts to reconnect to the primary replica&#46;

1 &#58; Connected&#46;

Each primary replica tracks the connection state for every secondary replica in the same availability group&#46; Secondary replicas track the connection state of only the primary replica&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_replica_states.connected_state_desc'>connected&#95;state&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of connection&#95;state&#44; one of&#58;

DISCONNECTED

CONNECTED </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_replica_states.recovery_health'>recovery&#95;health</a></td>
		<td> tinyint   </td>
		<td> Rollup of the database&#95;state column of the sys&#46;dm&#95;hadr&#95;database&#95;replica&#95;states dynamic management view&#46; The following are the possible values and their descriptions&#46;

0 &#58; In progress&#46; At least one joined database has a database state other than ONLINE &#40;database&#95;state is not 0&#41;&#46;

1 &#58; Online&#46; All the joined databases have a database state of ONLINE &#40;database&#95;state is 0&#41;&#46;

NULL &#58; is&#95;local &#61; 0 </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_replica_states.recovery_health_desc'>recovery&#95;health&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of recovery&#95;health&#44; one of&#58;

ONLINE&#95;IN&#95;PROGRESS

ONLINE

NULL </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_replica_states.synchronization_health'>synchronization&#95;health</a></td>
		<td> tinyint   </td>
		<td> Reflects a rollup of the database synchronization state &#40;synchronization&#95;state&#41;of all joined availability databases &#40;also known as replicas&#41; and the availability mode of the replica &#40;synchronous&#45;commit or asynchronous&#45;commit mode&#41;&#46; The rollup will reflect the least healthy accumulated state the databases on the replica&#46; Below are the possible values and their descriptions&#46;

0 &#58; Not healthy&#46; At least one joined database is in the NOT SYNCHRONIZING state&#46;

1 &#58; Partially healthy&#46; Some replicas are not in the target synchronization state&#58; synchronous&#45;commit replicas should be synchronized&#44; and asynchronous&#45;commit replicas should be synchronizing&#46;

2 &#58; Healthy&#46; All replicas are in the target synchronization state&#58; synchronous&#45;commit replicas are synchronized&#44; and asynchronous&#45;commit replicas are synchronizing&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_replica_states.synchronization_health_desc'>synchronization&#95;health&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of synchronization&#95;health&#44; one of&#58;

NOT&#95;HEALTHY

PARTIALLY&#95;HEALTHY

HEALTHY </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_replica_states.last_connect_error_number'>last&#95;connect&#95;error&#95;number</a></td>
		<td> int   </td>
		<td> Number of the last connection error&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_replica_states.last_connect_error_description'>last&#95;connect&#95;error&#95;description</a></td>
		<td> nvarchar&#40; 1024 &#41;   </td>
		<td> Text of the last&#95;connect&#95;error&#95;number message&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_availability_replica_states.last_connect_error_timestamp'>last&#95;connect&#95;error&#95;timestamp</a></td>
		<td> datetime   </td>
		<td> Date and time timestamp indicating when the last&#95;connect&#95;error&#95;number error occurred&#46; </td>
	</tr>
</tbody>
</table></div></div>

<br><br>
<div class='card'><div class='card-body'><a name='dm_hadr_database_replica_cluster_states' onclick='window.scrollTo(760, 944);return false;' style='cursor:pointer;'><h4 class='card-title'>Table sys.dm_hadr_database_replica_cluster_states</h4></a>
<p class="text-muted">Returns a row containing information intended to provide you with insight into the health of the availability databases in the Always On availability groups in each Always On availability group on the Windows Server Failover Clustering (WSFC) cluster. Query sys.dm_hadr_database_replica_states to answer the following questions:
* Are all databases in an availability group ready for a failover?
* After a forced failover, has a secondary database suspended itself locally and acknowledged its suspended state to the new primary replica?
* If the primary replica is currently unavailable, which secondary replica would allow the minimum data loss if it becomes the primary replica?
* When the value of the sys.databases log_reuse_wait_desc column is "AVAILABILITY_REPLICA", which secondary replica in an availability group is holding up log truncation on a given primary database?</p>
<table class='table-sm table-bordered'>
<thead>
<tr><th>Indexes</th><th>Field Name</th><th>Data Type</th><th>Description</th></tr></thead>
<tbody>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#fk'/></svg></td>
		<td><a name='dm_hadr_database_replica_cluster_states.replica_id'>replica&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Identifier of the availability replica within the availability group&#46; </td>
	</tr>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#fk'/></svg></td>
		<td><a name='dm_hadr_database_replica_cluster_states.group_database_id'>group&#95;database&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Identifier of the database within the availability group&#46; This identifier is identical on every replica to which this database is joined&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_cluster_states.database_name'>database&#95;name</a></td>
		<td> nvarchar&#40; 128 &#41;   </td>
		<td> Name of a database that belongs to the availability group&#46; </td>
	</tr>
	<tr>
		<td>*</td>
		<td><a name='dm_hadr_database_replica_cluster_states.is_failover_ready'>is&#95;failover&#95;ready</a></td>
		<td> bit   </td>
		<td> Indicates whether the secondary database is synchronized with the corresponding primary database&#46; one of&#58;

0 &#61; The database is not marked as synchronized in the cluster&#46; The database is not ready for a failover&#46;

1 &#61; The database is marked as synchronized in the cluster&#46; The database is ready for a failover&#46; </td>
	</tr>
	<tr>
		<td>*</td>
		<td><a name='dm_hadr_database_replica_cluster_states.is_pending_secondary_suspend'>is&#95;pending&#95;secondary&#95;suspend</a></td>
		<td> bit   </td>
		<td> Indicates whether&#44; after a forced failover&#44; the database is pending suspension&#44; one of&#58;

0 &#61; Any states except for HADR&#95;SYNCHRONIZED&#95; SUSPENDED&#46;

1 &#61; HADR&#95;SYNCHRONIZED&#95; SUSPENDED&#46; When a forced failover completes&#44; each of the secondary databases is set to HADR&#95;SYNCHONIZED&#95;SUSPENDED and remains in this state until the new primary replica receives an acknowledgement from that secondary database to the SUSPEND message&#46;

NULL &#61; Unknown &#40;no quorum&#41; </td>
	</tr>
	<tr>
		<td>*</td>
		<td><a name='dm_hadr_database_replica_cluster_states.is_database_joined'>is&#95;database&#95;joined</a></td>
		<td> bit   </td>
		<td> Indicates whether the database on this availability replica has been joined to the availability group&#44; one of&#58;

0 &#61; Database is not joined to the availability group on this availability replica&#46;

1 &#61; Database is joined to the availability group on this availability replica&#46;

NULL &#61; unknown &#40;The availability replica lacks quorum&#46;&#41; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_cluster_states.recovery_lsn'>recovery&#95;lsn</a></td>
		<td> numeric&#40; 25&#44; 0 &#41;   </td>
		<td> On the primary replica&#44; the end of the transaction log before the replica writes any new log records after recovery or failover&#46; On the primary replica&#44; the row for a given secondary database will have the value to which the primary replica needs the secondary replica to synchronize to &#40;that is&#44; to revert to and reinitialize to&#41;&#46;

On secondary replicas this value is NULL&#46; Note that each secondary replica will have either the MAX value or a lower value that the primary replica has told the secondary replica to go back to&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_cluster_states.truncation_lsn'>truncation&#95;lsn</a></td>
		<td> numeric&#40; 25&#44; 0 &#41;   </td>
		<td> The Always On availability groups log truncation value&#44; which may be higher than the local truncation LSN if local log truncation is blocked &#40;such as by a backup operation&#41;&#46; </td>
	</tr>
</tbody>
</table></div></div>

<br><br>
<div class='card'><div class='card-body'><a name='dm_hadr_database_replica_states' onclick='window.scrollTo(1192, 944);return false;' style='cursor:pointer;'><h4 class='card-title'>Table sys.dm_hadr_database_replica_states</h4></a>
<p class="text-muted">Returns a row for each database that is participating in an Always On availability group for which the local instance of SQL Server is hosting an availability replica. This dynamic management view exposes state information on both the primary and secondary replicas. On a secondary replica, this view returns a row for every secondary database on the server instance. On the primary replica, this view returns a row for each primary database and an additional row for the corresponding secondary database.

!IMPORTANT
Depending on the action and higher-level states, database-state information may be unavailable or out of date. Furthermore, the values have only local relevance. For example, on the primary replica, the value of the last_hardened_lsn column reflects the information about a given secondary database that is currently available to the primary replica, not the actual hardened LSN value that the secondary replica might have currently.</p>
<table class='table-sm table-bordered'>
<thead>
<tr><th>Indexes</th><th>Field Name</th><th>Data Type</th><th>Description</th></tr></thead>
<tbody>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#idx'/></svg><svg width='14' height='14'><use xlink:href='#fk'/></svg></td>
		<td><a name='dm_hadr_database_replica_states.database_id'>database&#95;id</a></td>
		<td> int   </td>
		<td> Identifier of the database&#44; unique within an instance of SQL Server&#46; This is the same value as displayed in the sys&#46;databases catalog view&#46; </td>
	</tr>
	<tr>
		<td>*</td>
		<td><a name='dm_hadr_database_replica_states.group_id'>group&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Identifier of the availability group to which the database belongs&#46; </td>
	</tr>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#fk'/></svg></td>
		<td><a name='dm_hadr_database_replica_states.replica_id'>replica&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Identifier of the availability replica within the availability group&#46; </td>
	</tr>
	<tr>
		<td>*<svg width='14' height='14'><use xlink:href='#fk'/></svg></td>
		<td><a name='dm_hadr_database_replica_states.group_database_id'>group&#95;database&#95;id</a></td>
		<td> uniqueidentifier   </td>
		<td> Identifier of the database within the availability group&#46; This identifier is identical on every replica to which this database is joined&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.is_local'>is&#95;local</a></td>
		<td> bit   </td>
		<td> Whether the availability database is local&#44; one of&#58;

0 &#61; The database is not local to the SQL Server instance&#46;

1 &#61; The database is local to the server instance&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.is_primary_replica'>is&#95;primary&#95;replica</a></td>
		<td> bit   </td>
		<td> Returns 1 if the replica is primary&#44; or 0 if it is a secondary replica&#46;

Applies to&#58; SQL Server 2014 &#40;12&#46;x&#41; through SQL Server 2017&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.synchronization_state'>synchronization&#95;state</a></td>
		<td> tinyint   </td>
		<td> Data&#45;movement state&#44; one of the following values&#46;

0 &#61; Not synchronizing&#46; For a primary database&#44; indicates that the database is not ready to synchronize its transaction log with the corresponding secondary databases&#46; For a secondary database&#44; indicates that the database has not started log synchronization because of a connection issue&#44; is being suspended&#44; or is going through transition states during startup or a role switch&#46;

1 &#61; Synchronizing&#46; For a primary database&#44; indicates that the database is ready to accept a scan request from a secondary database&#46; For a secondary database&#44; indicates that active data movement is occurring for the database&#46;

2 &#61; Synchronized&#46; A primary database shows SYNCHRONIZED in place of SYNCHRONIZING&#46; A synchronous&#45;commit secondary database shows synchronized when the local cache says the database is failover ready and is synchronizing&#46;

3 &#61; Reverting&#46; Indicates the phase in the undo process when a secondary database is actively getting pages from the primary database&#46;
Caution&#58; When a database on a secondary replica is in the REVERTING state&#44; forcing failover to the secondary replica leaves the database in a state in which it cannot be started as a primary database&#46; Either the database will need to reconnect as a secondary database&#44; or you will need to apply new log records from a log backup&#46;

4 &#61; Initializing&#46; Indicates the phase of undo when the transaction log required for a secondary database to catch up to the undo LSN is being shipped and hardened on a secondary replica&#46;
Caution&#58; When a database on a secondary replica is in the INITIALIZING state&#44; forcing failover to the secondary replica leaves the database in a state in which it be started as a primary database&#46; Either the database will need to reconnect as a secondary database&#44; or you will need to apply new log records from a log backup&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.synchronization_state_desc'>synchronization&#95;state&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of the data&#45;movement state&#44; one of&#58;

NOT SYNCHRONIZING

SYNCHRONIZING

SYNCHRONIZED

REVERTING

INITIALIZING </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.is_commit_participant'>is&#95;commit&#95;participant</a></td>
		<td> bit   </td>
		<td> 0 &#61; Transaction commit is not synchronized with respect to this database&#46;

1 &#61; Transaction commit is synchronized with respect to this database&#46;

For a database on an asynchronous&#45;commit availability replica&#44; this value is always 0&#46;

For a database on a synchronous&#45;commit availability replica&#44; this value is accurate only on the primary database&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.synchronization_health'>synchronization&#95;health</a></td>
		<td> tinyint   </td>
		<td> Reflects the intersection of the synchronization state of a database that is joined to the availability group on the availability replica and the availability mode of the availability replica &#40;synchronous&#45;commit or asynchronous&#45;commit mode&#41;&#44; one of the following values&#46;

0 &#61; Not healthy&#46; The synchronization&#95;state of the database is 0 &#40;NOT SYNCHRONIZING&#41;&#46;

1 &#61; Partially healthy&#46; A database on a synchronous&#45;commit availability replica is considered partially healthy if synchronization&#95;state is 1 &#40;SYNCHRONIZING&#41;&#46;

2 &#61; Healthy&#46; A database on an synchronous&#45;commit availability replica is considered healthy if synchronization&#95;state is 2 &#40;SYNCHRONIZED&#41;&#44; and a database on an asynchronous&#45;commit availability replica is considered healthy if synchronization&#95;state is 1 &#40;SYNCHRONIZING&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.synchronization_health_desc'>synchronization&#95;health&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of the synchronization&#95;health of the availability database&#46;

NOT&#95;HEALTHY

PARTIALLY&#95;HEALTHY

HEALTHY </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.database_state'>database&#95;state</a></td>
		<td> tinyint   </td>
		<td> 0 &#61; Online

1 &#61; Restoring

2 &#61; Recovering

3 &#61; Recovery pending

4 &#61; Suspect

5 &#61; Emergency

6 &#61; Offline

Note&#58; Same as state column in sys&#46;databases&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.database_state_desc'>database&#95;state&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of the database&#95;state of the availability replica&#46;

ONLINE

RESTORING

RECOVERING

RECOVERY&#95;PENDING

SUSPECT

EMERGENCY

OFFLINE

Note&#58; Same as state&#95;desc column in sys&#46;databases&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.is_suspended'>is&#95;suspended</a></td>
		<td> bit   </td>
		<td> Database state&#44; one of&#58;

0 &#61; Resumed

1 &#61; Suspended </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.suspend_reason'>suspend&#95;reason</a></td>
		<td> tinyint   </td>
		<td> If the database is suspended&#44; the reason for the suspended state&#44; one of&#58;

0 &#61; User action

1 &#61; Suspend from partner

2 &#61; Redo

3 &#61; Capture

4 &#61; Apply

5 &#61; Restart

6 &#61; Undo

7 &#61; Revalidation

8 &#61; Error in the calculation of the secondary&#45;replica synchronization point </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.suspend_reason_desc'>suspend&#95;reason&#95;desc</a></td>
		<td> nvarchar&#40; 60 &#41;   </td>
		<td> Description of the database suspended state reason&#44; one of&#58;

SUSPEND&#95;FROM&#95;USER &#61; A user manually suspended data movement

SUSPEND&#95;FROM&#95;PARTNER &#61; The database replica is suspended after a forced failover

SUSPEND&#95;FROM&#95;REDO &#61; An error occurred during the redo phase

SUSPEND&#95;FROM&#95;APPLY &#61; An error occurred when writing the log to file &#40;see error log&#41;

SUSPEND&#95;FROM&#95;CAPTURE &#61; An error occurred while capturing log on the primary replica

SUSPEND&#95;FROM&#95;RESTART &#61; The database replica was suspended before the database was restarted &#40;see error log&#41;

SUSPEND&#95;FROM&#95;UNDO &#61; An error occurred during the undo phase &#40;see error log&#41;

SUSPEND&#95;FROM&#95;REVALIDATION &#61; Log change mismatch is detected on reconnection &#40;see error log&#41;

SUSPEND&#95;FROM&#95;XRF&#95;UPDATE &#61; Unable to find the common log point &#40;see error log&#41; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.recovery_lsn'>recovery&#95;lsn</a></td>
		<td> numeric&#40; 25&#44; 0 &#41;   </td>
		<td> On the primary replica&#44; the end of the transaction log before the primary database writes any new log records after recovery or failover&#46; For a given secondary database&#44; if this value is less than the current hardened LSN &#40;last&#95;hardened&#95;lsn&#41;&#44; recovery&#95;lsn is the value to which this secondary database would need to resynchronize &#40;that is&#44; to revert to and reinitialize to&#41;&#46; If this value is greater than or equal to the current hardened LSN&#44; resynchronization would be unnecessary and would not occur&#46;

recovery&#95;lsn reflects a log&#45;block ID padded with zeroes&#46; It is not an actual log sequence number &#40;LSN&#41;&#46; For information about how this value is derived&#44; see Understanding the LSN Column Values&#44; later in this topic&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.truncation_lsn'>truncation&#95;lsn</a></td>
		<td> numeric&#40; 25&#44; 0 &#41;   </td>
		<td> On the primary replica&#44; for the primary database&#44; reflects the minimum log truncation LSN across all the corresponding secondary databases&#46; If local log truncation is blocked &#40;such as by a backup operation&#41;&#44; this LSN might be higher than the local truncation LSN&#46;

For a given secondary database&#44; reflects the truncation point of that database&#46;

truncation&#95;lsn reflects a log&#45;block ID padded with zeroes&#46; It is not an actual log sequence number&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.last_sent_lsn'>last&#95;sent&#95;lsn</a></td>
		<td> numeric&#40; 25&#44; 0 &#41;   </td>
		<td> The log block identifier that indicates the point up to which all log blocks have been sent by the primary&#46; This is the ID of the next log block that will be sent&#44; rather than the ID of the most recently sent log block&#46;

last&#95;sent&#95;lsn reflects a log&#45;block ID padded with zeroes&#44; It is not an actual log sequence number&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.last_sent_time'>last&#95;sent&#95;time</a></td>
		<td> datetime   </td>
		<td> Time when the last log block was sent&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.last_received_lsn'>last&#95;received&#95;lsn</a></td>
		<td> numeric&#40; 25&#44; 0 &#41;   </td>
		<td> Log block ID identifying the point up to which all log blocks have been received by the secondary replica that hosts this secondary database&#46;

last&#95;received&#95;lsn reflects a log&#45;block ID padded with zeroes&#46; It is not an actual log sequence number&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.last_received_time'>last&#95;received&#95;time</a></td>
		<td> datetime   </td>
		<td> Time when the log block ID in last message received was read on the secondary replica&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.last_hardened_lsn'>last&#95;hardened&#95;lsn</a></td>
		<td> numeric&#40; 25&#44; 0 &#41;   </td>
		<td> Start of the Log Block containing the log records of last hardened LSN on a secondary database&#46;

On an asynchronous&#45;commit primary database or on a synchronous&#45;commit database whose current policy is &quot;delay&quot;&#44; the value is NULL&#46; For other synchronous&#45;commit primary databases&#44; last&#95;hardened&#95;lsn indicates the minimum of the hardened LSN across all the secondary databases&#46;

Note&#58; last&#95;hardened&#95;lsn reflects a log&#45;block ID padded with zeroes&#46; It is not an actual log sequence number&#46; For more information&#44; see Understanding the LSN Column Values&#44; later in this topic&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.last_hardened_time'>last&#95;hardened&#95;time</a></td>
		<td> datetime   </td>
		<td> On a secondary database&#44; time of the log&#45;block identifier for the last hardened LSN &#40;last&#95;hardened&#95;lsn&#41;&#46; On a primary database&#44; reflects the time corresponding to minimum hardened LSN&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.last_redone_lsn'>last&#95;redone&#95;lsn</a></td>
		<td> numeric&#40; 25&#44; 0 &#41;   </td>
		<td> Actual log sequence number of the last log record that was redone on the secondary database&#46; last&#95;redone&#95;lsn is always less than last&#95;hardened&#95;lsn&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.last_redone_time'>last&#95;redone&#95;time</a></td>
		<td> datetime   </td>
		<td> Time when the last log record was redone on the secondary database&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.log_send_queue_size'>log&#95;send&#95;queue&#95;size</a></td>
		<td> bigint   </td>
		<td> Amount of log records of the primary database that has not been sent to the secondary databases&#44; in kilobytes &#40;KB&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.log_send_rate'>log&#95;send&#95;rate</a></td>
		<td> bigint   </td>
		<td> Average rate at which primary replica instance sent data during last active period&#44; in kilobytes &#40;KB&#41;&#47;second&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.redo_queue_size'>redo&#95;queue&#95;size</a></td>
		<td> bigint   </td>
		<td> Amount of log records in the log files of the secondary replica that has not yet been redone&#44; in kilobytes &#40;KB&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.redo_rate'>redo&#95;rate</a></td>
		<td> bigint   </td>
		<td> Average Rate at which the log records are being redone on a given secondary database&#44; in kilobytes &#40;KB&#41;&#47;second&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.filestream_send_rate'>filestream&#95;send&#95;rate</a></td>
		<td> bigint   </td>
		<td> The rate at which the FILESTREAM files are shipped to the secondary replica&#44; in kilobytes &#40;KB&#41;&#47;second&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.end_of_log_lsn'>end&#95;of&#95;log&#95;lsn</a></td>
		<td> numeric&#40; 25&#44; 0 &#41;   </td>
		<td> Local end of log LSN&#46; Actual LSN corresponding to the last log record in the log cache on the primary and secondary databases&#46; On the primary replica&#44; the secondary rows reflect the end of log LSN from the latest progress messages that the secondary replicas have sent to the primary replica&#46;

end&#95;of&#95;log&#95;lsn reflects a log&#45;block ID padded with zeroes&#46; It is not an actual log sequence number&#46; For more information&#44; see Understanding the LSN Column Values&#44; later in this topic&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.last_commit_lsn'>last&#95;commit&#95;lsn</a></td>
		<td> numeric&#40; 25&#44; 0 &#41;   </td>
		<td> Actual log sequence number corresponding to the last commit record in the transaction log&#46;

On the primary database&#44; this corresponds to the last commit record processed&#46; Rows for secondary databases show the log sequence number that the secondary replica has sent to the primary replica&#46;

On the secondary replica&#44; this is the last commit record that was redone&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.last_commit_time'>last&#95;commit&#95;time</a></td>
		<td> datetime   </td>
		<td> Time corresponding to the last commit record&#46;

On the secondary database&#44; this time is the same as on the primary database&#46;

On the primary replica&#44; each secondary database row displays the time that the secondary replica that hosts that secondary database has reported back to the primary replica&#46; The difference in time between the primary&#45;database row and a given secondary&#45;database row represents approximately the recovery point objective &#40;RPO&#41;&#44; assuming that the redo process is caught up and that the progress has been reported back to the primary replica by the secondary replica&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.low_water_mark_for_ghosts'>low&#95;water&#95;mark&#95;for&#95;ghosts</a></td>
		<td> bigint   </td>
		<td> A monotonically increasing number for the database indicating a low water mark used by ghost cleanup on the primary database&#46; If this number is not increasing over time&#44; it implies that ghost cleanup might not happen&#46; To decide which ghost rows to clean up&#44; the primary replica uses the minimum value of this column for this database across all availability replicas &#40;including the primary replica&#41;&#46; </td>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td><a name='dm_hadr_database_replica_states.secondary_lag_seconds'>secondary&#95;lag&#95;seconds</a></td>
		<td> bigint   </td>
		<td> The number of seconds that the secondary replica is behind the primary replica during synchronization&#46;

Applies to&#58; SQL Server 2016 &#40;13&#46;x&#41; through SQL Server 2017&#46; </td>
	</tr>
</tbody>
</table></div></div>

<p align='right'><a href='https://www.dbschema.com' style='color:#aaa'>Powered by DbSchema</a></p></body></html>